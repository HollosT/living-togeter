(()=>{"use strict";var e={230:(e,t,n)=>{n(6992),n(8674),n(9601),n(7727);var r=n(5010),i=n(3396);function a(e,t,n,r,a,s){var o=(0,i.up)("theHeader"),u=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(o),(0,i.Wm)(u)],64)}var s=n(124),o=n(8534),u=n(7139),l=function(e){return(0,i.dD)("data-v-3f4eac83"),e=e(),(0,i.Cn)(),e},c={key:0,class:"backdrop"},d=l((function(){return(0,i._)("h1",null,"Living together",-1)})),p={key:0},f={"data-logout":"true"},m=l((function(){return(0,i._)("h1",null,"Login",-1)}));function g(e,t,n,a,s,o){var l=(0,i.up)("router-link"),g=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("header",null,[a.menuOpen?((0,i.wg)(),(0,i.iD)("div",c)):(0,i.kq)("",!0),(0,i.Wm)(l,{to:"/",onClick:a.initNavClasses},{default:(0,i.w5)((function(){return[d]})),_:1},8,["onClick"]),a.isLoggedIn?((0,i.wg)(),(0,i.iD)("i",{key:1,class:(0,u.C_)([["fa-solid"],a.menuOpen?["fa-x"]:["fa-bars"],["fa-2x"]]),onClick:t[0]||(t[0]=function(){return a.toggleMenu&&a.toggleMenu.apply(a,arguments)})},null,2)):(0,i.kq)("",!0),(0,i.Wm)(r.W3,{name:"nav"},{default:(0,i.w5)((function(){return[a.menuOpen&&a.isLoggedIn?((0,i.wg)(),(0,i.iD)("nav",p,[(0,i._)("ul",null,[(0,i._)("li",{class:(0,u.C_)({active:a.memberActive})},[(0,i.Wm)(g,{type:"nav",onClick:a.getMember},{default:(0,i.w5)((function(){return[(0,i.Uk)("My community")]})),_:1},8,["onClick"])],2),(0,i._)("li",{class:(0,u.C_)({active:a.profileActive})},[(0,i.Wm)(g,{type:"nav",onClick:a.getProfile},{default:(0,i.w5)((function(){return[(0,i.Uk)("Profile")]})),_:1},8,["onClick"])],2),(0,i._)("li",{class:(0,u.C_)({active:a.registerActive})},[(0,i.Wm)(g,{type:"nav",onClick:a.registerCommunity},{default:(0,i.w5)((function(){return[(0,i.Uk)("Register a new community")]})),_:1},8,["onClick"])],2)]),(0,i._)("li",f,[(0,i.Wm)(g,{type:"nav",onClick:a.logout},{default:(0,i.w5)((function(){return[(0,i.Uk)("Logout")]})),_:1},8,["onClick"])])])):(0,i.kq)("",!0)]})),_:1}),a.isLoggedIn?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(l,{key:2,type:"nav",to:"/auth"},{default:(0,i.w5)((function(){return[m]})),_:1}))])}n(4916),n(5306),n(7658);var v=n(4870),h=n(65),b=n(2483);n(9254);function w(e,t,n,r,a,s){var o=(0,i.up)("router-link");return n.link?((0,i.wg)(),(0,i.j4)(o,{key:1,to:n.to,class:(0,u.C_)(n.type)},{default:(0,i.w5)((function(){return[(0,i.WI)(e.$slots,"default",{},void 0,!0)]})),_:3},8,["to","class"])):((0,i.wg)(),(0,i.iD)("button",{key:0,class:(0,u.C_)(n.type)},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],2))}const y={props:{type:{type:String,required:!1,default:null},link:{type:Boolean,required:!1,default:!1},to:{type:String,required:!1,default:"/"}}};var k=n(89);const _=(0,k.Z)(y,[["render",w],["__scopeId","data-v-4ae6f77a"]]),I=_,x={components:{BaseButton:I},setup:function(e){var t=(0,h.oR)(),n=(0,v.iH)(""),r=(0,b.tv)(),a=(0,v.iH)(""),u=(0,v.iH)(!1),l=(0,v.iH)(!1),c=(0,v.iH)(!1),d=(0,v.iH)(!1),p=(0,i.Fl)((function(){return t.getters.isAuthenticated}));function f(){l.value=!1,c.value=!1,d.value=!1}function m(){u.value=!u.value}function g(){t.dispatch("logout"),r.replace("/"),u.value=!1,f()}function w(){f(),r.push("/buildings/registration"),u.value=!1,d.value=!0}function y(){f(),a.value=localStorage.getItem("userId"),r.push("/profiles/"+a.value),u.value=!1,c.value=!0}function k(){return _.apply(this,arguments)}function _(){return _=(0,o.Z)((0,s.Z)().mark((function e(){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(f(),i=localStorage.getItem("userId"),localStorage.getItem("buildingMember")){e.next=5;break}return e.next=5,t.dispatch("residents/fetchApplication",i);case 5:n.value=localStorage.getItem("buildingMember"),r.push("/community/"+n.value),u.value=!1,l.value=!0;case 9:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}return{isLoggedIn:p,logout:g,getMember:k,buildingId:n,getProfile:y,userId:a,toggleMenu:m,menuOpen:u,registerCommunity:w,registerActive:d,profileActive:c,memberActive:l,initNavClasses:f}}},C=(0,k.Z)(x,[["render",g],["__scopeId","data-v-3f4eac83"]]),Z=C,N={components:{TheHeader:Z},setup:function(){var e=(0,h.oR)();function t(){return n.apply(this,arguments)}function n(){return n=(0,o.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("tryLogin");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),n.apply(this,arguments)}t()}},D=(0,k.Z)(N,[["render",a]]),S=D,P={registerBuilding:function(e,t){e.buildings.push(t)},setBuildings:function(e,t){e.buildings=t}};var A=n(9584);n(1249),n(1539),n(189),n(8783),n(3948);const j={buildings:function(e){return e.buildings},hasBuildings:function(e){return e.buildings&&e.buildings.length>0},getCountries:function(e){var t=e.buildings.map((function(e){return e.address.country})),n=(0,A.Z)(new Set(t));return n}};var B=n(5082);n(8862),n(1703),n(6647),n(8309),n(2526),n(1817);const F={registerBuilding:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings.json",{method:"POST",body:JSON.stringify(t)});case 2:if(r=n.sent,r.ok){n.next=6;break}throw i=new Error(a.message||"Failed to upload!"),i;case 6:return n.next=8,r.json();case 8:a=n.sent,e.commit("registerBuilding",(0,B.Z)({},a));case 10:case"end":return n.stop()}}),n)})))()},loadBuildings:function(e){return(0,o.Z)((0,s.Z)().mark((function t(){var n,r,i,a,o,u;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings.json");case 2:return n=t.sent,t.next=5,n.json();case 5:if(r=t.sent,n.ok){t.next=9;break}throw i=new Error(r.message||"Failed to fetch!"),i;case 9:for(o in a=[],r)u={id:o,address:{country:r[o].address.country,city:r[o].address.city,street:r[o].address.street,buildingNumber:r[o].address.buildingNumber,postalCode:r[o].address.postalCode},flats:r[o].flats,name:r[o].name,description:r[o].description,residents:[r[o].residents]},a.push(u);e.commit("setBuildings",a);case 12:case"end":return t.stop()}}),t)})))()},loadBuilding:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings/".concat(t,".json"));case 2:return r=n.sent,n.next=5,r.json();case 5:if(i=n.sent,r.ok){n.next=9;break}throw a=new Error(i.message||"Failed to fetch!"),a;case 9:o={id:t,address:{country:i.address.country,city:i.address.city,street:i.address.street,buildingNumber:i.address.buildingNumber,postalCode:i.address.postalCode},flats:i.flats,name:i.name,description:i.description},e.commit("setBuildings",o);case 11:case"end":return n.stop()}}),n)})))()}},U={namespaced:!0,state:function(){return{buildings:[]}},mutations:P,actions:F,getters:j},H={addApplication:function(e,t){e.applications.push(t),e.buildingMember=t.buildingId},setApplications:function(e,t){e.applications=t},setMember:function(e,t){e.buildingMember=t}};n(7327);const q={hasApplication:function(e,t,n,r){var i=r.userId,a=e.applications.filter((function(e){return e.userId===i}));return!!a.length>0},getApplications:function(e){return e.applications}},L={apply:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={buildingId:t.buildingId,userEmail:t.email,userId:t.userId},n.next=3,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/residents/".concat(t.buildingId,".json"),{method:"POST",body:JSON.stringify(r)});case 3:if(i=n.sent,i.ok){n.next=7;break}throw a=new Error(o.message||"Failed to send request."),a;case 7:return localStorage.setItem("buildingMember",t.buildingId),n.next=10,i.json();case 10:o=n.sent,r.id=o.name,r.buildingId=t.buildingId,e.commit("addApplication",r);case 14:case"end":return n.stop()}}),n)})))()},fetchApplications:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o,u,l;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/residents/".concat(t,".json"));case 2:return r=n.sent,n.next=5,r.json();case 5:if(i=n.sent,r.ok){n.next=9;break}throw a=new Error(i.message||"Failed to send request."),a;case 9:for(u in o=[],i)l={applicationId:u,buildingId:t,email:i[u].userEmail,userId:i[u].userId},o.push(l);e.commit("setApplications",o);case 12:case"end":return n.stop()}}),n)})))()},fetchApplication:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o,u;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/residents.json");case 2:return r=n.sent,n.next=5,r.json();case 5:if(i=n.sent,r.ok){n.next=9;break}throw a=new Error(i.message||"Failed to send request."),a;case 9:for(o in i)for(u in i[o])i[o][u].userId===t&&(localStorage.setItem("buildingMember",i[o][u].buildingId),e.commit("setMember",i[o][u].buildingId));case 10:case"end":return n.stop()}}),n)})))()},tryMember:function(e){var t=localStorage.getItem("buildingMember");t&&e.commit("setMember",t)}},W={namespaced:!0,state:function(){return{applications:[],buildingMember:""}},mutations:H,actions:L,getters:q},M={setUser:function(e,t){e.token=t.token,e.userId=t.userId,e.email=t.email}},T={isAuthenticated:function(e){return!!e.token},userId:function(e){return e.userId}},z={login:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.dispatch("auth",(0,B.Z)((0,B.Z)({},t),{},{mode:"login"})));case 1:case"end":return n.stop()}}),n)})))()},signup:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.dispatch("auth",(0,B.Z)((0,B.Z)({},t),{},{mode:"signup"})));case 1:case"end":return n.stop()}}),n)})))()},auth:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o,u;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.mode,i="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDFdJX12HXkQTuFCPN11sgU-vO-flAkYGY","signup"===r&&(i="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDFdJX12HXkQTuFCPN11sgU-vO-flAkYGY"),n.next=5,fetch(i,{method:"POST",body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0})});case 5:return a=n.sent,n.next=8,a.json();case 8:if(o=n.sent,a.ok){n.next=12;break}throw u=new Error(o.message||"Failed to authenticate! Check your credentials!"),u;case 12:localStorage.setItem("token",o.idToken),localStorage.setItem("userId",o.localId),localStorage.setItem("email",o.email),e.commit("setUser",{token:o.idToken,userId:o.localId,email:o.email});case 16:case"end":return n.stop()}}),n)})))()},tryLogin:function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("userId");t&&n&&e.commit("setUser",{token:t,userId:n})},logout:function(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("email"),localStorage.removeItem("buildingMember"),e.commit("setUser",{userId:null,token:null,email:null}),e.commit("residents/setMember",{buildingMember:null})}},O={state:function(){return{userId:null,token:null,email:null}},mutations:M,actions:z,getters:T},V={addProfile:function(e,t){e.ownProfile=t}},E={getProfile:function(e){return e.ownProfile}},R={registerProfile:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),r={userId:t.userId,firstName:t.firstName,lastName:t.lastName,flatAddress:t.flatAddress,age:t.age,url:t.url},n.next=4,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/profiles/".concat(t.userId,".json"),{method:"POST",body:JSON.stringify(r)});case 4:if(i=n.sent,i.ok){n.next=8;break}throw a=new Error(o.message||"Failed to send request."),a;case 8:return n.next=10,i.json();case 10:o=n.sent,e.commit("addProfile",r);case 12:case"end":return n.stop()}}),n)})))()},fetchProfile:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o,u;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/profiles/".concat(t,".json"));case 2:if(r=n.sent,r.ok){n.next=6;break}throw i=new Error(a.message||"Failed to send request."),i;case 6:return n.next=8,r.json();case 8:for(o in a=n.sent,a)u={userId:t,firstName:a[o].firstName,lastName:a[o].lastName,flatAddress:a[o].flatAddress,age:a[o].age,url:a[o].url},e.commit("addProfile",u);case 10:case"end":return n.stop()}}),n)})))()}},Y={namespaced:!0,state:function(){return{ownProfile:{}}},mutations:V,actions:R,getters:E},J={addPosts:function(e,t){e.allPosts=t},addPost:function(e,t){e.myPost=t}};n(3710),n(9554),n(4747),n(7042),n(2707),n(6699),n(2023);const K={getPosts:function(e,t){var n,r=e.allPosts,i=864e5,a=(new Date).getTime(),s=r.map((function(e){return e.date}));s.forEach((function(e,t){var s=a-e;if(s/i<1){var o=new Date(e).toLocaleString("eu-dk").split(",")[1].slice(1,6);n="Today at ".concat(o)}else s/i>1&&s/i<2?n="1 day ago":s/i>2&&s/i<3?n="2 days ago":s/i>3&&(n="More than 3 days ago...");r[t].displayDate=n}));var o,u=[];r.forEach((function(e,t){var n=e.comments.map((function(e){return e.commentDate}));u.push(n)})),u.forEach((function(e,t){e.forEach((function(e,n){var s=e,u=a-s;if(u/i<1){var l=new Date(s).toLocaleString("eu-dk").split(",")[1].slice(1,6);o="Today at ".concat(l)}else u/i>1&&u/i<2?o="1 day ago":u/i>2&&u/i<3?o="2 days ago":u/i>3&&(o="More than 3 days ago...");r[t].comments[n].commentDisplayedDate=o}))}));var l=r.sort((function(e,t){return t.date-e.date}));return l},isInteracted:function(e,t,n,r){var i=e.allPosts,a=r.userId,s=["likes","dislikes"],o=!1,u=!1;s.forEach((function(e){switch(e){case"likes":i.map((function(e){e.likes.includes(a)&&(o=!0)}));break;case"dislikes":i.map((function(e){e.dislikes.includes(a)&&(u=!0)}));break}}));var l={liked:o,disliked:u};return l}};n(2222),n(2772),n(561);const $={generatePost:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={userId:t.userId,email:t.email,post:t.post,date:t.date,firstName:t.firstName,lastName:t.lastName,buildingId:t.buildingId,likes:[],dislikes:[],comments:[]},n.next=3,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/posts/".concat(t.buildingId,"/").concat(t.userId,".json"),{method:"POST",body:JSON.stringify(r)});case 3:if(i=n.sent,i.ok){n.next=7;break}throw a=new Error(o.message||"Failed to send request."),a;case 7:return n.next=9,i.json();case 9:o=n.sent,e.commit("addPost",r);case 11:case"end":return n.stop()}}),n)})))()},loadPosts:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o,u,l,c,d;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/posts/".concat(t,".json"));case 2:if(r=n.sent,r.ok){n.next=6;break}throw i=new Error(o.message||"Failed to send request."),i;case 6:return a=[],n.next=9,r.json();case 9:for(u in o=n.sent,o)for(l in o[u])c=o[u][l],d={postId:l,userId:c.userId,email:c.email,post:c.post,date:c.date,firstName:c.firstName,lastName:c.lastName,likes:c.likes?c.likes:[],dislikes:c.dislikes?c.dislikes:[],comments:c.comments?c.comments:[],buildingId:c.buildingId},a.push(d);e.commit("addPosts",a);case 12:case"end":return n.stop()}}),n)})))()},uninteraction:function(e,t){return(0,o.Z)((0,s.Z)().mark((function e(){var n,r,i,a,o,u;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.mode,r=t[n].indexOf(t.curUser),i=t[n],i.splice(r,1),a={userId:t.userId,email:t.email,post:t.post,date:t.date,firstName:t.firstName,lastName:t.lastName,buildingId:t.buildingId,comments:t.comments},"likes"===n?(a.dislikes=t.dislikes,a.likes=i):"dislikes"===n&&(a.likes=t.likes,a.dislikes=i),e.next=9,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/posts/".concat(t.buildingId,"/").concat(t.userId,"/").concat(t.postId,".json"),{method:"PUT",body:JSON.stringify(a)});case 9:if(o=e.sent,o.ok){e.next=13;break}throw u=new Error(o.message||"Failed to send request."),u;case 13:return e.next=15,o.json();case 15:e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()},interactionWithThePost:function(e,t){return(0,o.Z)((0,s.Z)().mark((function n(){var r,i,a,o,u,l,c;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r=t.mode,n.next=4,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/posts/".concat(t.buildingId,"/").concat(t.userId,"/").concat(t.postId,".json"));case 4:return i=n.sent,n.next=7,i.json();case 7:if(a=n.sent,!a[r]||!a[r].includes(t.curUser)){n.next=12;break}e.dispatch("uninteraction",t),n.next=30;break;case 12:n.t0=r,n.next="likes"===n.t0?15:"dislikes"===n.t0?17:19;break;case 15:return o=t.likes,n.abrupt("break",19);case 17:return o=t.dislikes,n.abrupt("break",19);case 19:return o.push(t.curUser),u={userId:t.userId,email:t.email,post:t.post,date:t.date,firstName:t.firstName,lastName:t.lastName,buildingId:t.buildingId,comments:t.comments,likes:"likes"===r?o:t.likes,dislikes:"dilikes"===r?o:t.dislikes},n.next=23,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/posts/".concat(t.buildingId,"/").concat(t.userId,"/").concat(t.postId,".json"),{method:"PUT",body:JSON.stringify(u)});case 23:if(l=n.sent,l.ok){n.next=27;break}throw c=new Error(l.message||"Failed to send request."),c;case 27:return n.next=29,l.json();case 29:n.sent;case 30:n.next=35;break;case 32:n.prev=32,n.t1=n["catch"](0),console.log(n.t1);case 35:case"end":return n.stop()}}),n,null,[[0,32]])})))()},addComment:function(e,t){return(0,o.Z)((0,s.Z)().mark((function e(){var n,r,i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/posts/".concat(t.buildingId,"/").concat(t.userId,"/").concat(t.postId,".json"),{method:"PUT",body:JSON.stringify(t)});case 3:if(n=e.sent,n.ok){e.next=7;break}throw r=new Error(n.message||"Failed to send request."),r;case 7:return e.next=9,n.json();case 9:i=e.sent,console.log(i),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}},X={namespaced:!0,state:function(){return{allPosts:[],myPost:{}}},mutations:J,actions:$,getters:K};var G=(0,h.MT)({modules:{buildings:U,residents:W,auth:O,profiles:Y,posts:X}});const Q=G;var ee=function(e){return(0,i.dD)("data-v-a849953e"),e=e(),(0,i.Cn)(),e},te=ee((function(){return(0,i._)("div",{class:"intro"},[(0,i._)("h2",null,"Community list"),(0,i._)("p",null,"Find your neighbourhood and join the community")],-1)})),ne={class:"filter-action"},re=ee((function(){return(0,i._)("h3",null,"filter:",-1)})),ie={key:0,class:"filter-control"},ae={key:0},se={key:1},oe={key:2,class:"building-list-container"};function ue(e,t,n,r,a,s){var o=(0,i.up)("base-button"),l=(0,i.up)("building-filter"),c=(0,i.up)("building-item"),d=(0,i.up)("base-card");return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((function(){return[te,(0,i._)("div",ne,[(0,i._)("div",null,[re,(0,i.Wm)(o,{onClick:r.toggleFilter,type:"filled"},{default:(0,i.w5)((function(){return[(0,i._)("i",{class:(0,u.C_)(r.filterClass)},null,2)]})),_:1},8,["onClick"])]),r.isFilter?((0,i.wg)(),(0,i.iD)("div",ie,[(0,i.Wm)(l,{countries:r.countryArr,filters:r.filterCountry,onSetFilter:r.setFilter,onSearch:r.searchByCommunityName},null,8,["countries","filters","onSetFilter","onSearch"])])):(0,i.kq)("",!0)]),r.hasBuildings?r.hasBuildings&&r.isLoading?((0,i.wg)(),(0,i.iD)("div",se,"Loading...")):r.hasBuildings&&!r.isLoading?((0,i.wg)(),(0,i.iD)("ul",oe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.filteredBuildings,(function(e){return(0,i.wg)(),(0,i.j4)(c,{key:e.id,building:e},null,8,["building"])})),128))])):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("h2",ae,"There is no registered buildings yet!"))]})),_:1})}var le={class:"address"};function ce(e,t,n,r,a,s){var o=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("h3",null,(0,u.zw)(n.building.name),1),(0,i._)("div",le,[(0,i._)("p",null,(0,u.zw)(n.building.address.country)+",",1),(0,i._)("p",null,(0,u.zw)(n.building.address.city),1),(0,i._)("p",null,(0,u.zw)(n.building.address.street),1),(0,i._)("p",null,(0,u.zw)(n.building.address.buildingNumber)+".",1),(0,i._)("p",null,(0,u.zw)(n.building.address.postalCode)+".",1)]),(0,i._)("div",null,[(0,i.Wm)(o,{link:"",to:"buildings/"+n.building.id,type:"filled"},{default:(0,i.w5)((function(){return[(0,i.Uk)("See more")]})),_:1},8,["to"])])])}const de={components:{BaseButton:I},props:["building"]},pe=(0,k.Z)(de,[["render",ce],["__scopeId","data-v-6abf09a8"]]),fe=pe;n(4765);var me={class:"checkbox-container"},ge={class:"input-search"};function ve(e,t,n,r,a,s){var o=(0,i.up)("BaseCountryCheckBox"),u=(0,i.up)("BaseSearchInput");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",me,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.countries,(function(e){return(0,i.wg)(),(0,i.j4)(o,{key:e,id:e,filters:n.filters,onSetFilter:r.setFilter},null,8,["id","filters","onSetFilter"])})),128))]),(0,i._)("div",ge,[(0,i.Wm)(u,{label:"Community name: ",id:"communityName",type:"text",onSearchCommunity:r.search},null,8,["onSearchCommunity"])])],64)}var he=["for"],be=["id"];function we(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("span",null,[(0,i._)("label",{for:n.id},(0,u.zw)(n.id),9,he),(0,i._)("input",{class:"checkbox",type:"checkbox",id:n.id,checked:"",onChange:t[0]||(t[0]=function(){return r.onChange&&r.onChange.apply(r,arguments)})},null,40,be)])}var ye=n(2482);const ke={props:["id","checked","onChange","filters"],emits:["set-filter"],setup:function(e,t){function n(n){var r=n.target.id,i=n.target.checked,a=(0,B.Z)((0,B.Z)({},e.filters),{},(0,ye.Z)({},r,i));t.emit("set-filter",a)}return{onChange:n}}},_e=(0,k.Z)(ke,[["render",we],["__scopeId","data-v-23d7a4fb"]]),Ie=_e;var xe={for:"id"};function Ce(e,t,n,a,s,o){return(0,i.wg)(),(0,i.iD)("span",null,[(0,i._)("label",xe,(0,u.zw)(n.label),1),(0,i.wy)((0,i._)("input",{type:"type",id:"id","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.searchInput=e}),onInput:t[1]||(t[1]=function(){return a.search&&a.search.apply(a,arguments)})},null,544),[[r.nr,a.searchInput,void 0,{trim:!0}]])])}const Ze={props:["id","type","label"],emits:["search-community"],setup:function(e,t){var n=(0,v.iH)("");function r(){t.emit("search-community",n.value)}return{searchInput:n,search:r}}},Ne=(0,k.Z)(Ze,[["render",Ce],["__scopeId","data-v-5c0cebac"]]),De=Ne,Se={props:["countries","filters"],emits:["set-filter","search"],components:{BaseCountryCheckBox:Ie,BaseSearchInput:De},setup:function(e,t){function n(e){t.emit("set-filter",e)}function r(e){t.emit("search",e)}return{setFilter:n,search:r}}},Pe=(0,k.Z)(Se,[["render",ve],["__scopeId","data-v-ce8a2e92"]]),Ae=Pe;n(2564);function je(){var e=(0,h.oR)(),t=(0,v.iH)(""),n=(0,v.iH)(""),r=(0,i.Fl)((function(){var r=e.getters["buildings/buildings"],i=[],a=r.filter((function(e){for(var n in t.value)if(t.value[n]&&e.address.country===n)return!0;return!1}));return n.value?a.filter((function(e){return e.name.toLowerCase().includes(n.value)&&i.push(e),!1})):i=a,i}));function a(e){t.value=e}function s(e){n.value=e}return(0,i.YP)(n,(function(e){setTimeout((function(){e===n.value&&(n.value=e.toLowerCase())}),300)})),{setFilter:a,searchByCommunityName:s,filteredBuildings:r,filterCountry:t,searchNameInput:n}}const Be={components:{BuildingItem:fe,BuildingFilter:Ae},setup:function(){var e=(0,h.oR)(),t=(0,v.iH)(!0),n=(0,v.iH)([]),r=(0,v.iH)(!1),a=je(),u=a.setFilter,l=a.searchByCommunityName,c=a.filteredBuildings,d=a.filterCountry,p=(0,i.Fl)((function(){return e.getters["buildings/hasBuildings"]}));function f(){r.value=!r.value}var m=(0,i.Fl)((function(){return r.value?["fa-solid fa-filter fa-2x active"]:["fa-solid fa-filter fa-2x"]}));function g(){return b.apply(this,arguments)}function b(){return b=(0,o.Z)((0,s.Z)().mark((function r(){var i,a;return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.value=!0,r.prev=1,r.next=4,e.dispatch("buildings/loadBuildings");case 4:i=e.getters["buildings/getCountries"],a={},i.forEach((function(e){a[e]=!0})),d.value=a,n.value=i,r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),console.log(r.t0);case 14:t.value=!1;case 15:case"end":return r.stop()}}),r,null,[[1,11]])}))),b.apply(this,arguments)}return g(),{hasBuildings:p,isLoading:t,countryArr:n,filterCountry:d,setFilter:u,filteredBuildings:c,searchByCommunityName:l,isFilter:r,toggleFilter:f,filterClass:m}}},Fe=(0,k.Z)(Be,[["render",ue],["__scopeId","data-v-a849953e"]]),Ue=Fe;var He={key:1},qe=(0,i._)("p",null,"You need to log in to apply for this community",-1);function Le(e,t,n,r,a,s){var o=(0,i.up)("base-button"),l=(0,i.up)("router-link"),c=(0,i.up)("base-card");return(0,i.wg)(),(0,i.j4)(c,null,{default:(0,i.w5)((function(){return[(0,i._)("h2",null,(0,u.zw)(r.building.name),1),(0,i._)("p",null,(0,u.zw)(r.building.description),1),r.isLoggedIn&&!r.isApplied?((0,i.wg)(),(0,i.j4)(o,{key:0,link:"",to:"/community/"+r.building.id,type:"filled",onClick:r.apply},{default:(0,i.w5)((function(){return[(0,i.Uk)("Join this community")]})),_:1},8,["to","onClick"])):r.isLoggedIn?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",He,[qe,(0,i.Wm)(l,{link:"",to:"/auth",type:"filled"},{default:(0,i.w5)((function(){return[(0,i.Uk)("Login")]})),_:1})]))]})),_:1})}n(9826);const We={components:{BaseButton:I},props:["building"],setup:function(e){var t=(0,b.yj)(),n=((0,b.tv)(),(0,h.oR)()),r=(0,v.iH)(!1),a=(0,i.Fl)((function(){return n.getters.isAuthenticated})),u=(0,i.Fl)((function(){return n.getters["buildings/buildings"].find((function(e){return e.id===t.params.bid}))}));function l(){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,s.Z)().mark((function e(){var i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.dispatch("residents/fetchApplications",t.params.bid);case 3:i=n.getters["residents/hasApplication"],r.value=i,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),c.apply(this,arguments)}function d(){var e={email:localStorage.getItem("email"),userId:localStorage.getItem("userId"),buildingId:t.params.bid};n.dispatch("residents/apply",e)}return l(),{building:u,isLoggedIn:a,apply:d,isApplied:r}}},Me=(0,k.Z)(We,[["render",Le]]),Te=Me;var ze=(0,i._)("h3",null,"Register your building",-1);function Oe(e,t,n,r,a,s){var o=(0,i.up)("BuildingForm"),u=(0,i.up)("base-card");return(0,i.wg)(),(0,i.j4)(u,null,{default:(0,i.w5)((function(){return[ze,(0,i.Wm)(o,{onSaveData:r.uploadBuilding},null,8,["onSaveData"])]})),_:1})}var Ve=function(e){return(0,i.dD)("data-v-aa7ebcfa"),e=e(),(0,i.Cn)(),e},Ee={class:"input-container"},Re=Ve((function(){return(0,i._)("label",{for:"name"},"Add a name for your community:",-1)})),Ye={class:"input-container"},Je=Ve((function(){return(0,i._)("label",{for:"country"},"Country:",-1)})),Ke={class:"input-container"},$e=Ve((function(){return(0,i._)("label",{for:"city"},"City:",-1)})),Xe={class:"input-container"},Ge=Ve((function(){return(0,i._)("label",{for:"postalCode"},"Postal code:",-1)})),Qe={class:"input-container"},et=Ve((function(){return(0,i._)("label",{for:"street"},"Street:",-1)})),tt={class:"input-container"},nt=Ve((function(){return(0,i._)("label",{for:"buildingNumber"},"Building number:",-1)})),rt={class:"input-container"},it=Ve((function(){return(0,i._)("label",{for:"flats"},"Number of flats:",-1)})),at={class:"input-container"},st=Ve((function(){return(0,i._)("label",{for:"description"},"Description:",-1)}));function ot(e,t,n,a,s,o){var u=(0,i.up)("base-button"),l=(0,i.up)("base-form");return(0,i.wg)(),(0,i.j4)(l,{onSubmit:(0,r.iM)(a.submitForm,["prevent"])},{default:(0,i.w5)((function(){return[(0,i._)("div",Ee,[Re,(0,i.wy)((0,i._)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.name.val=e}),requeired:"",autofocus:""},null,512),[[r.nr,a.name.val,void 0,{trim:!0}]])]),(0,i._)("div",Ye,[Je,(0,i.wy)((0,i._)("input",{type:"text",id:"country","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.address.country.val=e}),requeired:""},null,512),[[r.nr,a.address.country.val,void 0,{trim:!0}]])]),(0,i._)("div",Ke,[$e,(0,i.wy)((0,i._)("input",{type:"text",id:"city","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.address.city.val=e}),requeired:""},null,512),[[r.nr,a.address.city.val,void 0,{trim:!0}]])]),(0,i._)("div",Xe,[Ge,(0,i.wy)((0,i._)("input",{type:"number",id:"postalCode","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.address.postalCode.val=e}),requeired:""},null,512),[[r.nr,a.address.postalCode.val,void 0,{trim:!0}]])]),(0,i._)("div",Qe,[et,(0,i.wy)((0,i._)("input",{type:"text",id:"street","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.address.street.val=e}),requeired:""},null,512),[[r.nr,a.address.street.val,void 0,{trim:!0}]])]),(0,i._)("div",tt,[nt,(0,i.wy)((0,i._)("input",{type:"number",id:"buildingNumber","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.address.buildingNumber.val=e}),requeired:""},null,512),[[r.nr,a.address.buildingNumber.val,void 0,{trim:!0}]])]),(0,i._)("div",rt,[it,(0,i.wy)((0,i._)("input",{type:"number",id:"flats","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.flats.val=e}),requeired:""},null,512),[[r.nr,a.flats.val,void 0,{trim:!0}]])]),(0,i._)("div",at,[st,(0,i.wy)((0,i._)("textarea",{id:"description",rows:"3","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.description.val=e}),requeired:""},null,512),[[r.nr,a.description.val,void 0,{trim:!0}]])]),(0,i.Wm)(u,{type:"filled"},{default:(0,i.w5)((function(){return[(0,i.Uk)("Send")]})),_:1})]})),_:1},8,["onSubmit"])}n(5065);const ut={emits:["save-data"],setup:function(e,t){var n=(0,h.oR)(),r=(n.getters["buildings/buildings"],(0,v.iH)(!0),(0,v.iH)({val:"",isValid:!0})),i=(0,v.iH)({country:{val:"",isUnique:!0,isValid:!0},city:{val:"",isUnique:!0,isValid:!0},postalCode:{val:"",isUnique:!0,isValid:!0},street:{val:"",isUnique:!0,isValid:!0},buildingNumber:{val:"",isUnique:!0,isValid:!0}}),a=(0,v.iH)({val:"",isValid:!0}),s=(0,v.iH)({val:"",isValid:!0});function o(){var e={address:{country:i.value.country.val,city:i.value.city.val,street:i.value.street.val,buildingNumber:i.value.buildingNumber.val,postalCode:i.value.postalCode.val},flats:a.value.val,name:r.value.val,description:s.value.val};t.emit("save-data",e)}return{name:r,address:i,flats:a,description:s,submitForm:o}}},lt=(0,k.Z)(ut,[["render",ot],["__scopeId","data-v-aa7ebcfa"]]),ct=lt,dt={components:{BuildingForm:ct},setup:function(){var e=(0,h.oR)(),t=(0,b.tv)();function n(n){e.dispatch("buildings/registerBuilding",n),t.replace("/")}return{uploadBuilding:n}}},pt=(0,k.Z)(dt,[["render",Oe]]),ft=pt;var mt=function(e){return(0,i.dD)("data-v-14022f72"),e=e(),(0,i.Cn)(),e},gt=mt((function(){return(0,i._)("h2",null,"Register as a resident",-1)})),vt={key:0},ht={class:"input-container"},bt=mt((function(){return(0,i._)("label",{for:"email"},"Email address:",-1)})),wt={class:"input-container"},yt=mt((function(){return(0,i._)("label",{for:"password"},"Password:",-1)})),kt={class:"input-container"};function _t(e,t,n,a,s,o){var l=(0,i.up)("profile-form"),c=(0,i.up)("base-button"),d=(0,i.up)("base-form"),p=(0,i.up)("base-card");return(0,i.wg)(),(0,i.j4)(p,null,{default:(0,i.w5)((function(){return[gt,a.isLoading?((0,i.wg)(),(0,i.iD)("div",vt,"Authenticating...")):((0,i.wg)(),(0,i.j4)(d,{key:1,onSubmit:(0,r.iM)(a.submitForm,["prevent"])},{default:(0,i.w5)((function(){return[(0,i._)("div",ht,[bt,(0,i.wy)((0,i._)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.email=e}),requeired:""},null,512),[[r.nr,a.email,void 0,{trim:!0}]])]),(0,i._)("div",wt,[yt,(0,i.wy)((0,i._)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.password=e}),requeired:""},null,512),[[r.nr,a.password,void 0,{trim:!0}]])]),"signup"===a.mode?((0,i.wg)(),(0,i.j4)(l,{key:0,onProfileData:a.sortProfileData},null,8,["onProfileData"])):(0,i.kq)("",!0),(0,i._)("div",kt,[(0,i.Wm)(c,{type:"filled"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,u.zw)(a.submitBtnCaption),1)]})),_:1}),(0,i._)("p",null,[(0,i.Uk)("Or "),(0,i._)("span",{onClick:t[2]||(t[2]=function(){return a.switchAuth&&a.switchAuth.apply(a,arguments)})},(0,u.zw)(a.authContent),1),(0,i.Uk)(" instead!")])])]})),_:1},8,["onSubmit"]))]})),_:1})}var It=function(e){return(0,i.dD)("data-v-0937216a"),e=e(),(0,i.Cn)(),e},xt={class:"input-container"},Ct=It((function(){return(0,i._)("label",{for:"firstName"},"First name:",-1)})),Zt={class:"input-container"},Nt=It((function(){return(0,i._)("label",{for:"lastName"},"Last name:",-1)})),Dt={class:"input-container"},St=It((function(){return(0,i._)("label",{for:"age"},"Age:",-1)})),Pt={class:"input-container"},At=It((function(){return(0,i._)("label",{for:"flatAddress"},"Flat address:",-1)})),jt={class:"input-container"},Bt=It((function(){return(0,i._)("label",{for:"url"},"Profile picture url:",-1)}));function Ft(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",xt,[Ct,(0,i._)("input",{type:"text",id:"firstName",onBlur:t[0]||(t[0]=function(e){return r.getData(e,"firstName")})},null,32)]),(0,i._)("div",Zt,[Nt,(0,i._)("input",{type:"text",id:"lastName",onBlur:t[1]||(t[1]=function(e){return r.getData(e,"lastName")})},null,32)]),(0,i._)("div",Dt,[St,(0,i._)("input",{type:"age",id:"age",onBlur:t[2]||(t[2]=function(e){return r.getData(e,"age")})},null,32)]),(0,i._)("div",Pt,[At,(0,i._)("input",{type:"text",id:"flatAddress",onBlur:t[3]||(t[3]=function(e){return r.getData(e,"flatAddress")})},null,32)]),(0,i._)("div",jt,[Bt,(0,i._)("input",{type:"text",id:"url",onBlur:t[4]||(t[4]=function(e){return r.getData(e,"url")})},null,32)])],64)}const Ut={emits:["profileData"],setup:function(e,t){function n(e,n){t.emit("profileData",e.target.value,n)}return{getData:n}}},Ht=(0,k.Z)(Ut,[["render",Ft],["__scopeId","data-v-0937216a"]]),qt=Ht,Lt={components:{BaseButton:I,ProfileForm:qt},setup:function(){var e=(0,v.iH)(""),t=(0,v.iH)(""),n=(0,v.iH)({firstName:"",lastName:"",age:null,flatAddress:"",url:""}),r=(0,v.iH)("login"),a=(0,v.iH)(!1),u=(0,h.oR)(),l=(0,b.tv)();function c(e,t){for(var r in n.value)r===t&&(n.value[r]=e)}var d=(0,i.Fl)((function(){return"login"===r.value?"Login":"Signup"})),p=(0,i.Fl)((function(){return"login"===r.value?"Sign up":"Log in"}));function f(){"login"===r.value?r.value="signup":"signup"===r.value&&(r.value="login")}function m(){return g.apply(this,arguments)}function g(){return g=(0,o.Z)((0,s.Z)().mark((function i(){var o,c;return(0,s.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o={email:e.value,password:t.value},a.value=!0,i.prev=2,"login"!==r.value){i.next=8;break}return i.next=6,u.dispatch("login",o);case 6:i.next=13;break;case 8:return i.next=10,u.dispatch("signup",o);case 10:return c=u.getters["userId"],i.next=13,u.dispatch("profiles/registerProfile",(0,B.Z)((0,B.Z)({},n.value),{},{userId:c}));case 13:l.replace("/"),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](2),console.log(i.t0);case 19:case"end":return i.stop()}}),i,null,[[2,16]])}))),g.apply(this,arguments)}return{email:e,password:t,submitBtnCaption:d,authContent:p,switchAuth:f,submitForm:m,isLoading:a,mode:r,sortProfileData:c}}},Wt=(0,k.Z)(Lt,[["render",_t],["__scopeId","data-v-14022f72"]]),Mt=Wt;function Tt(e,t,n,r,a,s){var o=(0,i.up)("community-list"),l=(0,i.up)("base-sidebar"),c=(0,i.up)("post-list"),d=(0,i.up)("base-card");return(0,i.wg)(),(0,i.iD)("section",null,[(0,i.Wm)(l,{title:"Members"},{default:(0,i.w5)((function(){return[(0,i.Wm)(o,{members:r.members},null,8,["members"])]})),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((function(){return[(0,i._)("h2",null,(0,u.zw)(r.building.name),1),(0,i.Wm)(c)]})),_:1})])}var zt=["src","alt"];function Ot(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.members,(function(e){return(0,i.wg)(),(0,i.iD)("li",{key:e.userId,class:"member-list"},[(0,i._)("img",{src:e.url,alt:e.firstName},null,8,zt),(0,i._)("div",null,[(0,i._)("p",null,(0,u.zw)(e.firstName)+" "+(0,u.zw)(e.lastName),1),(0,i._)("address",null,"Flat: "+(0,u.zw)(e.flatAddress),1)])])})),128))])}const Vt={props:["members"]},Et=(0,k.Z)(Vt,[["render",Ot],["__scopeId","data-v-63eec917"]]),Rt=Et;var Yt=function(e){return(0,i.dD)("data-v-6d89ecfd"),e=e(),(0,i.Cn)(),e},Jt={class:"addpost-container"},Kt=Yt((function(){return(0,i._)("h4",null,"Share your thoughts...",-1)})),$t=["rows"],Xt={class:"addpost-btn-container"},Gt={key:0},Qt={key:1},en=Yt((function(){return(0,i._)("h3",null,"Posts",-1)}));function tn(e,t,n,a,s,o){var l=(0,i.up)("base-button"),c=(0,i.up)("post-item");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Jt,[Kt,(0,i._)("div",null,[(0,i.wy)((0,i._)("textarea",{class:(0,u.C_)({invalidTextarea:!a.isValid}),cols:"80",rows:a.rowLength,autofocus:"",placeholder:"...","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.post=e}),onFocus:t[1]||(t[1]=function(){return a.addjustRowLength&&a.addjustRowLength.apply(a,arguments)}),onBlur:t[2]||(t[2]=function(){return a.reduceRowLength&&a.reduceRowLength.apply(a,arguments)})},null,42,$t),[[r.nr,a.post,void 0,{trim:!0}]]),(0,i._)("div",Xt,[(0,i.Wm)(l,{onClick:(0,r.iM)(a.cancel,["prevent"]),type:"secondary"},{default:(0,i.w5)((function(){return[(0,i.Uk)("Cancel")]})),_:1},8,["onClick"]),(0,i.Wm)(l,{onClick:a.uploadPost,type:a.buttonType},{default:(0,i.w5)((function(){return[(0,i.Uk)("Post")]})),_:1},8,["onClick","type"])])])]),!a.posts.length>0?((0,i.wg)(),(0,i.iD)("p",Gt,"There are no posts for this community yet...")):((0,i.wg)(),(0,i.iD)("ul",Qt,[en,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.posts,(function(e){return(0,i.wg)(),(0,i.j4)(c,{key:e.postId,post:e,onInteraction:a.addInteraction},null,8,["post","onInteraction"])})),128))]))],64)}var nn=function(e){return(0,i.dD)("data-v-e8c012aa"),e=e(),(0,i.Cn)(),e},rn={class:"post-content-container"},an={class:"author"},sn={class:"date"},on={class:"post"},un={class:"interaction-contianer"},ln={class:"btn-container"},cn=nn((function(){return(0,i._)("i",{class:"fa-regular fa-thumbs-up"},null,-1)})),dn=nn((function(){return(0,i._)("i",{class:"fa-regular fa-thumbs-down"},null,-1)}));function pn(e,t,n,r,a,s){var o=(0,i.up)("base-button"),l=(0,i.up)("CommentList");return(0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("div",rn,[(0,i._)("div",null,[(0,i._)("h6",an,(0,u.zw)(n.post.firstName)+" "+(0,u.zw)(n.post.lastName),1),(0,i._)("time",sn,(0,u.zw)(n.post.displayDate),1)]),(0,i._)("p",on,(0,u.zw)(n.post.post),1)]),(0,i._)("div",un,[(0,i._)("div",ln,[(0,i.Wm)(o,{onClick:t[0]||(t[0]=function(e){return r.interaction(n.post,"likes")}),type:"reverse"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,u.zw)(n.post.likes.length)+" ",1),cn]})),_:1}),(0,i.Wm)(o,{onClick:t[1]||(t[1]=function(e){return r.interaction(n.post,"dislikes")}),type:"reverse"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,u.zw)(n.post.dislikes.length)+" ",1),dn]})),_:1}),(0,i.Wm)(o,{onClick:r.toggleComments,type:"reverse"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,u.zw)(r.commentCaption),1)]})),_:1},8,["onClick"])]),(0,i._)("div",null,[r.commentsVisible?((0,i.wg)(),(0,i.j4)(l,{key:0,comments:n.post.comments,onAddComment:r.getComment},null,8,["comments","onAddComment"])):(0,i.kq)("",!0)])])])}var fn={class:"comment-container"},mn={class:"add-comment__container"};function gn(e,t,n,r,a,s){var o=(0,i.up)("comment-item"),u=(0,i.up)("add-comment");return(0,i.wg)(),(0,i.iD)("div",fn,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.comments,(function(e){return(0,i.wg)(),(0,i.j4)(o,{key:e.commentDate[1],comment:e},null,8,["comment"])})),128))]),(0,i._)("div",mn,[(0,i.Wm)(u,{onAddComment:r.getComment},null,8,["onAddComment"])])])}var vn={class:"btn-container"};function hn(e,t,n,a,s,o){var l=(0,i.up)("base-button");return(0,i.wg)(),(0,i.iD)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((function(){return a.getComment&&a.getComment.apply(a,arguments)}),["prevent"]))},[(0,i.wy)((0,i._)("textarea",{class:(0,u.C_)({invalidTextarea:!a.isValid}),name:"addComment",id:"addComment",rows:"3",placeholder:"Add your thoughts...","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.comment=e})},null,2),[[r.nr,a.comment,void 0,{trim:!0}]]),(0,i._)("div",vn,[(0,i.Wm)(l,{onClick:(0,r.iM)(a.cancel,["prevent"]),type:"secondary"},{default:(0,i.w5)((function(){return[(0,i.Uk)("Cancel")]})),_:1},8,["onClick"]),(0,i.Wm)(l,{class:(0,u.C_)({invalid:!a.isValid}),type:a.buttonType},{default:(0,i.w5)((function(){return[(0,i.Uk)("Add")]})),_:1},8,["class","type"])])],32)}const bn={emits:["add-comment"],setup:function(e,t){var n=(0,v.iH)(""),r=(0,v.iH)(!1),a=(0,v.iH)("inactive");function s(){t.emit("add-comment",n.value),n.value=""}function o(){n.value=""}return(0,i.YP)(n,(function(e,t){0===e.length||0===t.length?(r.value=!1,a.value="inactive"):(r.value=!0,a.value="green")})),{comment:n,getComment:s,isValid:r,buttonType:a,cancel:o}}},wn=(0,k.Z)(bn,[["render",hn],["__scopeId","data-v-20d200c7"]]),yn=wn;var kn=function(e){return(0,i.dD)("data-v-08623a98"),e=e(),(0,i.Cn)(),e},_n={class:"name-date-container"},In={"data-paragraph":"small"},xn=kn((function(){return(0,i._)("div",{class:"comment-date"},null,-1)}));function Cn(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("div",_n,[(0,i._)("p",In,(0,u.zw)(n.comment.firstName)+" "+(0,u.zw)(n.comment.lastName),1),(0,i._)("time",null,(0,u.zw)(n.comment.commentDisplayedDate),1)]),(0,i._)("div",null,[(0,i._)("p",null,(0,u.zw)(n.comment.body),1),xn])])}const Zn={props:["comment"]},Nn=(0,k.Z)(Zn,[["render",Cn],["__scopeId","data-v-08623a98"]]),Dn=Nn,Sn={components:{AddComment:yn,CommentItem:Dn},emits:["add-comment"],props:["comments"],setup:function(e,t){function n(e){t.emit("add-comment",e)}return{getComment:n}}},Pn=(0,k.Z)(Sn,[["render",gn],["__scopeId","data-v-3d6d7f48"]]),An=Pn,jn={components:{CommentList:An},emits:["interaction"],props:["post"],setup:function(e,t){var n=(0,v.iH)(!1);function r(e,n){var r=(0,B.Z)((0,B.Z)({},e),{},{mode:n});t.emit("interaction",r)}var a=(0,i.Fl)((function(){var t=e.post.comments.length;return!1===n.value?"".concat(t>0?"See comments ("+t+")":"Add comment"):"See less"}));function u(){n.value=!n.value}function l(e){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,s.Z)().mark((function t(n){var r,i,a,o,u,l;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=localStorage.getItem("userId"),t.next=4,Q.dispatch("profiles/fetchProfile",r);case 4:return t.next=6,Q.getters["profiles/getProfile"];case 6:return i=t.sent,a=(new Date).getTime(),o={body:n,userId:r,buildingId:e.post.buildingId,commentDate:a,firstName:i.firstName,lastName:i.lastName},u=e.post.comments,u.push(o),l=(0,B.Z)((0,B.Z)({},e.post),{},{comments:u}),t.next=14,Q.dispatch("posts/addComment",l);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])}))),c.apply(this,arguments)}return{interaction:r,toggleComments:u,commentsVisible:n,commentCaption:a,getComment:l}}},Bn=(0,k.Z)(jn,[["render",pn],["__scopeId","data-v-e8c012aa"]]),Fn=Bn,Un={components:{PostItem:Fn},setup:function(){var e=(0,h.oR)(),t=(0,v.iH)(""),n=(0,v.iH)([]),r=(0,v.iH)(!1),a=(0,v.iH)("inactive"),u=(0,v.iH)(1);function l(){t.value=""}function c(){u.value=5}function d(){u.value=1}function p(e){return f.apply(this,arguments)}function f(){return f=(0,o.Z)((0,s.Z)().mark((function t(n){var r;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=localStorage.getItem("userId"),t.prev=1,t.next=4,e.dispatch("posts/interactionWithThePost",(0,B.Z)((0,B.Z)({},n),{},{curUser:r}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:"likes"===n.mode&&(isLiked.value=!isLiked.value);case 10:case"end":return t.stop()}}),t,null,[[1,6]])}))),f.apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return g=(0,o.Z)((0,s.Z)().mark((function n(r){var i,a,o,l;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=localStorage.getItem("userId"),n.next=4,e.dispatch("profiles/fetchProfile",i);case 4:return a=e.getters["profiles/getProfile"],o=(new Date).getTime(),l={buildingId:localStorage.getItem("buildingMember"),userId:i,email:localStorage.getItem("email"),post:t.value,date:o,firstName:a.firstName,lastName:a.lastName},n.next=9,e.dispatch("posts/generatePost",l);case 9:t.value="",r.target.value="",u.value=1,b(),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](0),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])}))),g.apply(this,arguments)}function b(){return w.apply(this,arguments)}function w(){return w=(0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("posts/loadPosts",localStorage.getItem("buildingMember"));case 3:r=e.getters["posts/getPosts"],n.value=r,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),w.apply(this,arguments)}return(0,i.YP)(t,(function(e,t){0===e.length||0===t.length?(r.value=!1,a.value="inactive"):(r.value=!0,a.value="green")})),b(),{post:t,uploadPost:m,posts:n,addInteraction:p,buttonType:a,isValid:r,cancel:l,rowLength:u,addjustRowLength:c,reduceRowLength:d}}},Hn=(0,k.Z)(Un,[["render",tn],["__scopeId","data-v-6d89ecfd"]]),qn=Hn,Ln={components:{CommunityList:Rt,PostList:qn},setup:function(){var e=(0,h.oR)(),t=(0,v.iH)({}),n=(0,v.iH)([]);function r(){return i.apply(this,arguments)}function i(){return i=(0,o.Z)((0,s.Z)().mark((function r(){var i,a,o,u,l,c;return(0,s.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=localStorage.getItem("buildingMember"),r.prev=1,r.next=4,e.dispatch("buildings/loadBuilding",i);case 4:return r.next=6,e.getters["buildings/buildings"];case 6:return a=r.sent,t.value=a,r.next=10,e.dispatch("residents/fetchApplications",i);case 10:return r.next=12,e.getters["residents/getApplications"];case 12:o=r.sent,r.t0=(0,s.Z)().keys(o);case 14:if((r.t1=r.t0()).done){r.next=25;break}return u=r.t1.value,l=o[u].userId,r.next=19,e.dispatch("profiles/fetchProfile",l);case 19:return r.next=21,e.getters["profiles/getProfile"];case 21:c=r.sent,n.value.push(c),r.next=14;break;case 25:r.next=30;break;case 27:r.prev=27,r.t2=r["catch"](1),console.log(r.t2);case 30:case"end":return r.stop()}}),r,null,[[1,27]])}))),i.apply(this,arguments)}return r(),{building:t,members:n}}},Wn=(0,k.Z)(Ln,[["render",Tt],["__scopeId","data-v-f924df3e"]]),Mn=Wn;function Tn(e,t,n,r,a,s){var o=(0,i.up)("base-card");return(0,i.wg)(),(0,i.j4)(o,null,{default:(0,i.w5)((function(){return[(0,i.Uk)((0,u.zw)(r.profile.firstName)+" "+(0,u.zw)(r.profile.lastName),1)]})),_:1})}const zn={setup:function(){var e=(0,h.oR)(),t=(0,v.iH)({});function n(){return r.apply(this,arguments)}function r(){return r=(0,o.Z)((0,s.Z)().mark((function n(){var r,i;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=localStorage.getItem("userId"),n.prev=1,n.next=4,e.dispatch("profiles/fetchProfile",r);case 4:i=e.getters["profiles/getProfile"],t.value=i,n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])}))),r.apply(this,arguments)}return n(),{profile:t}}},On=(0,k.Z)(zn,[["render",Tn]]),Vn=On;var En=(0,b.p7)({history:(0,b.r5)(),routes:[{path:"/",redirect:"/buildings"},{path:"/buildings",name:"buildinglist",component:Ue},{path:"/buildings/:bid",name:"buildingDetail",component:Te},{path:"/buildings/registration",name:"buildingRegistration",component:ft,meta:{requiresAuth:!0}},{path:"/auth",name:"useAuth",component:Mt},{path:"/profiles/:id",name:"profile",component:Vn,meta:{requiresAuth:!0}},{path:"/community/:bid",name:"community",component:Mn,meta:{requiresAuth:!0}}]});En.beforeEach((function(e,t,n){e.meta.requiresAuth&&!Q.getters.isAuthenticated?n("/auth"):n()}));const Rn=En;var Yn={class:"card"};function Jn(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("div",Yn,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])}const Kn={},$n=(0,k.Z)(Kn,[["render",Jn],["__scopeId","data-v-b77ecf8e"]]),Xn=$n;function Gn(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("form",null,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])}const Qn={},er=(0,k.Z)(Qn,[["render",Gn],["__scopeId","data-v-830eee90"]]),tr=er;function nr(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("aside",null,[(0,i._)("h4",null,(0,u.zw)(n.title),1),(0,i.WI)(e.$slots,"default",{},void 0,!0)])}const rr={props:["title"]},ir=(0,k.Z)(rr,[["render",nr],["__scopeId","data-v-5cd76bc6"]]),ar=ir;var sr=(0,r.ri)(S);sr.use(Q),sr.use(Rn),sr.component("base-card",Xn),sr.component("base-button",I),sr.component("base-form",tr),sr.component("base-sidebar",ar),sr.mount("#app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,i,a)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,i,a]=e[c],o=!0,u=0;u<r.length;u++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(o=!1,a<s&&(s=a));if(o){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,i,a]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,a,[s,o,u]=r,l=0;if(s.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(u)var c=u(n)}for(t&&t(r);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkliving_together"]=self["webpackChunkliving_together"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[998],(()=>n(230)));r=n.O(r)})();
//# sourceMappingURL=app.e4b39664.js.map