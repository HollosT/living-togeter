{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.push.js\";\nexport default {\n  registerBuilding: function registerBuilding(context, data) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var response, error, responseData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings.json\", {\n                method: 'POST',\n                body: JSON.stringify(data)\n              });\n            case 2:\n              response = _context.sent;\n              if (response.ok) {\n                _context.next = 6;\n                break;\n              }\n              error = new Error(responseData.message || 'Failed to upload!');\n              throw error;\n            case 6:\n              _context.next = 8;\n              return response.json();\n            case 8:\n              responseData = _context.sent;\n              context.commit('registerBuilding', _objectSpread({}, responseData));\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  loadBuildings: function loadBuildings(context) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var response, responseData, error, buildings, key, building;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings.json\");\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return response.json();\n            case 5:\n              responseData = _context2.sent;\n              if (response.ok) {\n                _context2.next = 9;\n                break;\n              }\n              error = new Error(responseData.message || 'Failed to fetch!');\n              throw error;\n            case 9:\n              buildings = [];\n              for (key in responseData) {\n                building = {\n                  id: key,\n                  address: {\n                    country: responseData[key].address.country,\n                    city: responseData[key].address.city,\n                    street: responseData[key].address.street,\n                    buildingNumber: responseData[key].address.buildingNumber,\n                    postalCode: responseData[key].address.postalCode\n                  },\n                  flats: responseData[key].flats,\n                  name: responseData[key].name,\n                  description: responseData[key].description,\n                  residents: [responseData[key].residents]\n                };\n                buildings.push(building);\n              }\n              context.commit('setBuildings', buildings);\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  loadBuilding: function loadBuilding(context, buildingId) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var response, responseData, error, building;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return fetch(\"https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings/\".concat(buildingId, \".json\"));\n            case 2:\n              response = _context3.sent;\n              _context3.next = 5;\n              return response.json();\n            case 5:\n              responseData = _context3.sent;\n              if (response.ok) {\n                _context3.next = 9;\n                break;\n              }\n              error = new Error(responseData.message || 'Failed to fetch!');\n              throw error;\n            case 9:\n              console.log(responseData);\n              building = {\n                address: {\n                  country: responseData.address.country,\n                  city: responseData.address.city,\n                  street: responseData.address.street,\n                  buildingNumber: responseData.address.buildingNumber,\n                  postalCode: responseData.address.postalCode\n                },\n                flats: responseData.flats,\n                name: responseData.name,\n                description: responseData.description\n              };\n              console.log(building);\n              context.commit('setBuildings', building);\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n};","map":{"version":3,"names":["registerBuilding","context","data","fetch","method","body","JSON","stringify","response","ok","error","Error","responseData","message","json","commit","loadBuildings","buildings","key","building","id","address","country","city","street","buildingNumber","postalCode","flats","name","description","residents","push","loadBuilding","buildingId","console","log"],"sources":["/Users/tamashollos/Git/living-togeter/src/store/modules/buildings/actions.js"],"sourcesContent":["export default {\n\n    async registerBuilding(context, data) {\n        const response = await fetch(`https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings.json`, {\n            method: 'POST',\n            body: JSON.stringify(data)\n        })\n\n        if(!response.ok) {\n            const error = new Error(responseData.message || 'Failed to upload!')\n            throw error\n        }\n\n        const responseData = await response.json()\n\n        context.commit('registerBuilding', {\n            ...responseData\n\n        })\n    },\n\n\n    async loadBuildings(context) {\n        const response = await fetch(`https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings.json`)\n        const responseData = await response.json()\n\n        if(!response.ok) {\n            const error = new Error(responseData.message || 'Failed to fetch!')\n            throw error\n        }\n\n        const buildings = [];\n\n        for(const key in responseData) {\n            const building = {\n                id: key,\n                address: {\n                    country: responseData[key].address.country,\n                    city: responseData[key].address.city,\n                    street: responseData[key].address.street,\n                    buildingNumber: responseData[key].address.buildingNumber, \n                    postalCode: responseData[key].address.postalCode,\n                },\n                flats: responseData[key].flats,\n                name: responseData[key].name,\n                description: responseData[key].description,\n                residents: [responseData[key].residents]\n            }\n\n            buildings.push(building)\n        }\n        context.commit('setBuildings', buildings)\n    },\n\n    async loadBuilding(context, buildingId) {\n        const response = await fetch(`https://living-together-90530-default-rtdb.europe-west1.firebasedatabase.app/buildings/${buildingId}.json`)\n        const responseData = await response.json()\n\n        if(!response.ok) {\n            const error = new Error(responseData.message || 'Failed to fetch!')\n            throw error\n        }\n        console.log(responseData);\n\n    \n        const building = {\n                address: {\n                    country: responseData.address.country,\n                    city: responseData.address.city,\n                    street: responseData.address.street,\n                    buildingNumber: responseData.address.buildingNumber, \n                    postalCode: responseData.address.postalCode,\n                },\n                flats: responseData.flats,\n                name: responseData.name,\n                description: responseData.description\n        }\n\n            console.log(building)\n            context.commit('setBuildings', building)\n\n    },\n\n    \n    \n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}