{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport BaseButton from '@/components/UI/BaseButton.vue';\nimport { ref } from '@vue/reactivity';\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nexport default {\n  components: {\n    BaseButton: BaseButton\n  },\n  setup: function setup() {\n    var email = ref('');\n    var password = ref('');\n    var mode = ref('login');\n    var isLoading = ref(false);\n    var store = useStore();\n    var submitBtnCaption = computed(function () {\n      if (mode.value === 'login') {\n        return 'Login';\n      } else {\n        return 'Signup';\n      }\n    });\n    var authContent = computed(function () {\n      if (mode.value === 'login') {\n        return 'Sign up';\n      } else {\n        return 'Log in';\n      }\n    });\n    function switchAuth() {\n      if (mode.value === 'login') {\n        mode.value = 'signup';\n      } else if (mode.value === 'signup') {\n        mode.value = 'login';\n      }\n    }\n    function submitForm() {\n      return _submitForm.apply(this, arguments);\n    }\n    function _submitForm() {\n      _submitForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var payload;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                payload = {\n                  email: email.value,\n                  password: password.value\n                };\n                isLoading.value = true;\n                _context.prev = 2;\n                if (!(mode.value === 'login')) {\n                  _context.next = 6;\n                  break;\n                }\n                _context.next = 6;\n                return store.dispatch('login');\n              case 6:\n                _context.next = 11;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 8]]);\n      }));\n      return _submitForm.apply(this, arguments);\n    }\n    return {\n      email: email,\n      password: password,\n      submitBtnCaption: submitBtnCaption,\n      authContent: authContent,\n      switchAuth: switchAuth,\n      submitForm: submitForm,\n      isLoading: isLoading\n    };\n  }\n};","map":{"version":3,"mappings":";;AAwBA,OAAOA,UAAS,MAAO,gCAA+B;AACtD,SAASC,GAAE,QAAS,iBAAgB;AACpC,SAASC,QAAO,QAAS,mBAAmB;AAC5C,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,UAAU,EAAE;IAAEJ,UAAS,EAATA;EAAW,CAAC;EAE1BK,KAAK,mBAAG;IACN,IAAMC,KAAI,GAAIL,GAAG,CAAC,EAAE,CAAC;IACrB,IAAMM,QAAO,GAAIN,GAAG,CAAC,EAAE;IACvB,IAAMO,IAAG,GAAIP,GAAG,CAAC,OAAO;IACxB,IAAMQ,SAAQ,GAAIR,GAAG,CAAC,KAAK;IAC3B,IAAMS,KAAI,GAAIP,QAAQ,EAAC;IAEvB,IAAMQ,gBAAe,GAAIT,QAAQ,CAAC,YAAM;MACpC,IAAGM,IAAI,CAACI,KAAI,KAAM,OAAO,EAAE;QACvB,OAAO,OAAM;MACjB,OAAO;QACH,OAAO,QAAO;MAClB;IACJ,CAAC;IACD,IAAMC,WAAU,GAAIX,QAAQ,CAAC,YAAM;MAC/B,IAAGM,IAAI,CAACI,KAAI,KAAM,OAAO,EAAE;QACvB,OAAO,SAAQ;MACnB,OAAO;QACH,OAAO,QAAO;MAClB;IACJ,CAAC;IAED,SAASE,UAAU,GAAG;MAClB,IAAIN,IAAI,CAACI,KAAI,KAAM,OAAO,EAAE;QACxBJ,IAAI,CAACI,KAAI,GAAI,QAAO;MACxB,OAAO,IAAIJ,IAAI,CAACI,KAAI,KAAM,QAAQ,EAAE;QAChCJ,IAAI,CAACI,KAAI,GAAI,OAAM;MACvB;IACJ;IAAA,SAEcG,UAAU;MAAA;IAAA;IAAA;MAAA,yEAAzB;QAAA;QAAA;UAAA;YAAA;cAAA;gBACWC,OAAM,GAAI;kBACZV,KAAK,EAAEA,KAAK,CAACM,KAAK;kBAClBL,QAAQ,EAAEA,QAAQ,CAACK;gBACvB;gBACAH,SAAS,CAACG,KAAI,GAAI,IAAG;gBAAA;gBAAA,MAEdJ,IAAI,CAACI,KAAI,KAAM,OAAO;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACfF,KAAK,CAACO,QAAQ,CAAC,OAAO;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIhCC,OAAO,CAACC,GAAG,aAAK;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAKxB;MAAA;IAAA;IAIA,OAAO;MAACb,KAAK,EAALA,KAAK;MAAEC,QAAQ,EAARA,QAAQ;MAAEI,gBAAgB,EAAhBA,gBAAgB;MAAEE,WAAW,EAAXA,WAAW;MAAEC,UAAU,EAAVA,UAAU;MAAEC,UAAU,EAAVA,UAAU;MAAEN,SAAS,EAATA;IAAS;EAC3F;AAGF","names":["BaseButton","ref","computed","useStore","components","setup","email","password","mode","isLoading","store","submitBtnCaption","value","authContent","switchAuth","submitForm","payload","dispatch","console","log"],"sourceRoot":"","sources":["/Users/tamashollos/Git/living-togeter/src/pages/auth/UseAuth.vue"],"sourcesContent":["<template>\n  <base-card>\n    <h2>Register as a resident</h2>\n    <div v-if=\"isLoading\">Authenticating...</div>\n    <base-form v-else @submit.prevent=\"submitForm\">\n            <div class=\"input-container\">\n                <label for=\"email\">Email address:</label>\n                <input type=\"email\" id=\"email\" v-model.trim=\"email\" requeired>\n            </div>\n\n            <div class=\"input-container\">\n                <label for=\"password\">Password:</label>\n                <input type=\"password\" id=\"password\" v-model.trim=\"password\" requeired>\n            </div>\n            <div class=\"input-container\">\n                <base-button type=\"filled\">{{submitBtnCaption}}</base-button>\n                <p>Or <span @click=\"switchAuth\">{{authContent}}</span> instead!</p>\n            </div>\n  </base-form>\n</base-card>\n\n</template>\n\n<script>\nimport BaseButton from '@/components/UI/BaseButton.vue'\nimport { ref } from '@vue/reactivity'\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\n\nexport default {\n  components: { BaseButton },\n\n  setup() {\n    const email = ref('');\n    const password = ref('')\n    const mode = ref('login')\n    const isLoading = ref(false)\n    const store = useStore()\n\n    const submitBtnCaption = computed(() => {\n        if(mode.value === 'login') {\n            return 'Login'\n        } else {\n            return 'Signup'\n        }\n    })\n    const authContent = computed(() => {\n        if(mode.value === 'login') {\n            return 'Sign up'\n        } else {\n            return 'Log in'\n        }\n    })\n\n    function switchAuth() {\n        if (mode.value === 'login') {\n            mode.value = 'signup'\n        } else if (mode.value === 'signup') {\n            mode.value = 'login'\n        }\n    }\n\n   async function submitForm() {\n        const payload = {\n            email: email.value,\n            password: password.value\n        }\n        isLoading.value = true\n        try{\n            if(mode.value === 'login') {\n                await store.dispatch('login')\n            }\n\n        }catch(err) {\n            console.log(err);\n        }\n\n\n\n    }\n\n\n\n    return {email, password, submitBtnCaption, authContent, switchAuth, submitForm, isLoading}\n  }\n \n\n}\n</script>\n\n<style scoped>\n\n.input-container {\n        width: 80%;\n        margin: auto;\n        display: flex;\n        gap: 2vw;\n        margin-bottom: 3vw;\n        justify-content: center;\n        \n    }\n\n    input,\n    textarea {\n        width: 25vw;\n        border-radius: .5vw;\n\n    }\n\n    span {\n        text-decoration: underline;\n        cursor: pointer;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module"}