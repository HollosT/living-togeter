{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { computed, ref } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  setup: function setup() {\n    var store = useStore();\n    var buildingId = ref('');\n    var router = useRouter();\n    var userId = ref('');\n    var isLoggedIn = computed(function () {\n      return store.getters.isAuthenticated;\n    });\n    function logout() {\n      store.dispatch('logout');\n      router.replace('/');\n    }\n    function getProfile() {\n      userId.value = localStorage.getItem('userId');\n      router.push('/community/' + buildingId.value);\n    }\n    function getMember() {\n      return _getMember.apply(this, arguments);\n    }\n    function _getMember() {\n      _getMember = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var userId;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                userId = localStorage.getItem('userId');\n                if (localStorage.getItem('buildingMember')) {\n                  _context.next = 4;\n                  break;\n                }\n                _context.next = 4;\n                return store.dispatch('residents/fetchApplication', userId);\n              case 4:\n                buildingId.value = localStorage.getItem('buildingMember');\n                router.push('/community/' + buildingId.value);\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getMember.apply(this, arguments);\n    }\n    return {\n      isLoggedIn: isLoggedIn,\n      logout: logout,\n      getMember: getMember,\n      buildingId: buildingId,\n      getProfile: getProfile,\n      userId: userId\n    };\n  }\n};","map":{"version":3,"mappings":";;;;;AAqBA,SAASA,QAAQ,EAAEC,GAAE,QAAS,mBAAkB;AAChD,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,YAAW;AAErC,eAAe;EAEbC,KAAK,mBAAG;IACN,IAAMC,KAAI,GAAIH,QAAQ,EAAC;IACvB,IAAMI,UAAS,GAAIL,GAAG,CAAC,EAAE;IACzB,IAAMM,MAAK,GAAIJ,SAAS,EAAC;IACzB,IAAMK,MAAK,GAAIP,GAAG,CAAC,EAAE;IAErB,IAAMQ,UAAS,GAAIT,QAAQ,CAAC,YAAM;MAChC,OAAOK,KAAK,CAACK,OAAO,CAACC,eAAc;IACrC,CAAC;IAGD,SAASC,MAAM,GAAG;MAChBP,KAAK,CAACQ,QAAQ,CAAC,QAAQ;MACvBN,MAAM,CAACO,OAAO,CAAC,GAAG;IAEpB;IAEA,SAASC,UAAU,GAAG;MACrBP,MAAM,CAACQ,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,QAAQ;MAC5CX,MAAM,CAACY,IAAI,CAAC,aAAY,GAAIb,UAAU,CAACU,KAAK;IAG7C;IAAA,SAEeI,SAAS;MAAA;IAAA;IAAA;MAAA,wEAAxB;QAAA;QAAA;UAAA;YAAA;cAAA;gBACQZ,MAAK,GAAIS,YAAY,CAACC,OAAO,CAAC,QAAQ;gBAAA,IAExCD,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAClCb,KAAK,CAACQ,QAAQ,CAAC,4BAA4B,EAAEL,MAAM;cAAA;gBAG3DF,UAAU,CAACU,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,gBAAgB;gBACxDX,MAAM,CAACY,IAAI,CAAC,aAAY,GAAIb,UAAU,CAACU,KAAK;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC9C;MAAA;IAAA;IAEA,OAAM;MAAEP,UAAU,EAAVA,UAAU;MAAEG,MAAM,EAANA,MAAM;MAAEQ,SAAS,EAATA,SAAS;MAAEd,UAAU,EAAVA,UAAU;MAAES,UAAU,EAAVA,UAAU;MAAEP,MAAM,EAANA;IAAM;EACvE;AAEF","names":["computed","ref","useStore","useRouter","setup","store","buildingId","router","userId","isLoggedIn","getters","isAuthenticated","logout","dispatch","replace","getProfile","value","localStorage","getItem","push","getMember"],"sourceRoot":"","sources":["/Users/tamashollos/Git/living-togeter/src/components/layouts/TheHeader.vue"],"sourcesContent":["<template>\n  <header>\n    <nav>\n\n        <router-link to=\"/\"><h1>Living together</h1></router-link> \n\n\n        <base-button v-if=\"isLoggedIn\" @click=\"getMember\"  type=\"filled\">My community</base-button> \n        <base-button v-if=\"isLoggedIn\" @click=\"getProfile\"  link type=\"filled\">My profile</base-button> \n\n\n        <base-button v-if=\"isLoggedIn\" @click=\"logout\" type=\"filled\">Logout</base-button>\n\n        <router-link  v-else to=\"/auth\"><h1>Login</h1></router-link> \n  \n    </nav>\n\n  </header>\n</template>\n\n<script>\nimport { computed, ref } from '@vue/runtime-core'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default {\n\n  setup() {\n    const store = useStore()\n    const buildingId = ref('')\n    const router = useRouter()\n    const userId = ref('')\n\n    const isLoggedIn = computed(() => {\n      return store.getters.isAuthenticated\n    })\n\n\n    function logout() {\n      store.dispatch('logout')\n      router.replace('/')\n\n    }\n\n    function getProfile() {\n     userId.value = localStorage.getItem('userId')\n     router.push('/community/' + buildingId.value)\n\n     \n    }\n\n    async function getMember() {\n      const userId = localStorage.getItem('userId')\n\n      if(!localStorage.getItem('buildingMember')) {\n        await store.dispatch('residents/fetchApplication', userId)\n      } \n      \n      buildingId.value = localStorage.getItem('buildingMember')\n      router.push('/community/' + buildingId.value)\n    }\n\n    return{ isLoggedIn, logout, getMember, buildingId, getProfile, userId}\n  }\n\n}\n</script>\n\n<style scoped>\nheader {\n  padding: 0;\n  margin: 0;\n  box-shadow: 0 2px 2px rgba(0, 0, 0, .25);\n  background-color: #f3f3f3;\n  width: 100%;\n  \n}\nnav {\n  padding: 2vw 0;\n  display: flex;\n  width: 90%;\n  justify-content: space-between;\n  margin: auto;\n}\n\n\n a {\n\n  text-decoration: none;\n  color: black;\n  padding: .5vw 1vw;\n  border-radius: 100vw;\n  border:  transparent;\n\n\n} \n a:active,\n a:hover,\n a.router-link-active {\n  border: #b5b5b5;\n  background-color: white;\n} \n\nnav > div  {\n  display: flex;\n  gap: 5vw\n}\n\n\n</style>"]},"metadata":{},"sourceType":"module"}