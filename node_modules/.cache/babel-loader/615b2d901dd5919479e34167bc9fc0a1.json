{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport BaseButton from '@/components/UI/BaseButton.vue';\nimport { ref } from '@vue/reactivity';\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport ProfileForm from '@/components/profiles/ProfileForm.vue';\nexport default {\n  components: {\n    BaseButton: BaseButton,\n    ProfileForm: ProfileForm\n  },\n  setup: function setup() {\n    var email = ref('');\n    var password = ref('');\n\n    // Profile information \n    var profile = ref({\n      firstName: '',\n      lastName: ''\n    });\n    var mode = ref('login');\n    var isLoading = ref(false);\n    var store = useStore();\n    var router = useRouter();\n    function sortProfileData(data, keyValue) {\n      for (key in profile.value) {\n        if (key === keyValue) {}\n      }\n    }\n    var submitBtnCaption = computed(function () {\n      if (mode.value === 'login') {\n        return 'Login';\n      } else {\n        return 'Signup';\n      }\n    });\n    var authContent = computed(function () {\n      if (mode.value === 'login') {\n        return 'Sign up';\n      } else {\n        return 'Log in';\n      }\n    });\n    function switchAuth() {\n      if (mode.value === 'login') {\n        mode.value = 'signup';\n      } else if (mode.value === 'signup') {\n        mode.value = 'login';\n      }\n    }\n    function submitForm() {\n      return _submitForm.apply(this, arguments);\n    }\n    function _submitForm() {\n      _submitForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var payload;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                payload = {\n                  email: email.value,\n                  password: password.value\n                };\n                isLoading.value = true;\n                _context.prev = 2;\n                if (!(mode.value === 'login')) {\n                  _context.next = 8;\n                  break;\n                }\n                _context.next = 6;\n                return store.dispatch('login', payload);\n              case 6:\n                _context.next = 10;\n                break;\n              case 8:\n                _context.next = 10;\n                return store.dispatch('signup', payload);\n              case 10:\n                router.replace('/');\n                _context.next = 16;\n                break;\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 13]]);\n      }));\n      return _submitForm.apply(this, arguments);\n    }\n    return {\n      email: email,\n      password: password,\n      submitBtnCaption: submitBtnCaption,\n      authContent: authContent,\n      switchAuth: switchAuth,\n      submitForm: submitForm,\n      isLoading: isLoading,\n      mode: mode\n    };\n  }\n};","map":{"version":3,"mappings":";;;;AAyBA,OAAOA,UAAS,MAAO,gCAA+B;AACtD,SAASC,GAAE,QAAS,iBAAgB;AACpC,SAASC,QAAO,QAAS,mBAAmB;AAC5C,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AACtC,OAAOC,WAAU,MAAO,uCAAuC;AAE/D,eAAe;EACbC,UAAU,EAAE;IAAEN,UAAU,EAAVA,UAAU;IAAEK,WAAU,EAAVA;EAAY,CAAC;EAEvCE,KAAK,mBAAG;IACN,IAAMC,KAAI,GAAIP,GAAG,CAAC,EAAE,CAAC;IACrB,IAAMQ,QAAO,GAAIR,GAAG,CAAC,EAAE;;IAEvB;IACA,IAAMS,OAAM,GAAIT,GAAG,CAAC;MAChBU,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE;IACd,CAAC;IAED,IAAMC,IAAG,GAAIZ,GAAG,CAAC,OAAO;IACxB,IAAMa,SAAQ,GAAIb,GAAG,CAAC,KAAK;IAC3B,IAAMc,KAAI,GAAIZ,QAAQ,EAAC;IACvB,IAAMa,MAAK,GAAIZ,SAAS,EAAC;IAIzB,SAASa,eAAe,CAACC,IAAI,EAAEC,QAAQ,EAAG;MACtC,KAAIC,GAAE,IAAKV,OAAO,CAACW,KAAK,EAAE;QACtB,IAAGD,GAAE,KAAMD,QAAQ,EAAE,CAErB;MACJ;IAEJ;IAEA,IAAMG,gBAAe,GAAIpB,QAAQ,CAAC,YAAM;MACpC,IAAGW,IAAI,CAACQ,KAAI,KAAM,OAAO,EAAE;QACvB,OAAO,OAAM;MACjB,OAAO;QACH,OAAO,QAAO;MAClB;IACJ,CAAC;IACD,IAAME,WAAU,GAAIrB,QAAQ,CAAC,YAAM;MAC/B,IAAGW,IAAI,CAACQ,KAAI,KAAM,OAAO,EAAE;QACvB,OAAO,SAAQ;MACnB,OAAO;QACH,OAAO,QAAO;MAClB;IACJ,CAAC;IAED,SAASG,UAAU,GAAG;MAClB,IAAIX,IAAI,CAACQ,KAAI,KAAM,OAAO,EAAE;QACxBR,IAAI,CAACQ,KAAI,GAAI,QAAO;MACxB,OAAO,IAAIR,IAAI,CAACQ,KAAI,KAAM,QAAQ,EAAE;QAChCR,IAAI,CAACQ,KAAI,GAAI,OAAM;MACvB;IACJ;IAAA,SAEcI,UAAU;MAAA;IAAA;IAAA;MAAA,yEAAzB;QAAA;QAAA;UAAA;YAAA;cAAA;gBACWC,OAAM,GAAI;kBACZlB,KAAK,EAAEA,KAAK,CAACa,KAAK;kBAClBZ,QAAQ,EAAEA,QAAQ,CAACY;gBACvB;gBAEAP,SAAS,CAACO,KAAI,GAAI,IAAG;gBAAA;gBAAA,MAEdR,IAAI,CAACQ,KAAI,KAAM,OAAO;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACfN,KAAK,CAACY,QAAQ,CAAC,OAAO,EAAED,OAAO;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAE/BX,KAAK,CAACY,QAAQ,CAAC,QAAQ,EAAED,OAAO;cAAA;gBAE1CV,MAAM,CAACY,OAAO,CAAC,GAAG;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAElBC,OAAO,CAACC,GAAG,aAAK;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAExB;MAAA;IAAA;IAIA,OAAO;MAACtB,KAAK,EAALA,KAAK;MAAEC,QAAQ,EAARA,QAAQ;MAAEa,gBAAgB,EAAhBA,gBAAgB;MAAEC,WAAW,EAAXA,WAAW;MAAEC,UAAU,EAAVA,UAAU;MAAEC,UAAU,EAAVA,UAAU;MAAEX,SAAS,EAATA,SAAS;MAAED,IAAI,EAAJA;IAAI;EACjG;AAGF","names":["BaseButton","ref","computed","useStore","useRouter","ProfileForm","components","setup","email","password","profile","firstName","lastName","mode","isLoading","store","router","sortProfileData","data","keyValue","key","value","submitBtnCaption","authContent","switchAuth","submitForm","payload","dispatch","replace","console","log"],"sourceRoot":"","sources":["/Users/tamashollos/Git/living-togeter/src/pages/auth/UseAuth.vue"],"sourcesContent":["<template>\n  <base-card>\n    <h2>Register as a resident</h2>\n    <div v-if=\"isLoading\">Authenticating...</div>\n    <base-form v-else @submit.prevent=\"submitForm\">\n            <div class=\"input-container\">\n                <label for=\"email\">Email address:</label>\n                <input type=\"email\" id=\"email\" v-model.trim=\"email\" requeired>\n            </div>\n\n            <div class=\"input-container\">\n                <label for=\"password\">Password:</label>\n                <input type=\"password\" id=\"password\" v-model.trim=\"password\" requeired>\n            </div>\n            <profile-form v-if=\"mode=== 'signup'\" :profileData=\"sortProfileData\"></profile-form>\n            <div class=\"input-container\">\n                <base-button type=\"filled\">{{submitBtnCaption}}</base-button>\n                <p>Or <span @click=\"switchAuth\">{{authContent}}</span> instead!</p>\n            </div>\n  </base-form>\n</base-card>\n\n</template>\n\n<script>\nimport BaseButton from '@/components/UI/BaseButton.vue'\nimport { ref } from '@vue/reactivity'\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport ProfileForm from '@/components/profiles/ProfileForm.vue';\n\nexport default {\n  components: { BaseButton, ProfileForm },\n\n  setup() {\n    const email = ref('');\n    const password = ref('')\n\n    // Profile information \n    const profile = ref({\n        firstName: '',\n        lastName: ''\n    })\n    \n    const mode = ref('login')\n    const isLoading = ref(false)\n    const store = useStore()\n    const router = useRouter()\n\n\n\n    function sortProfileData(data, keyValue)  {\n        for(key in profile.value) {\n            if(key === keyValue) {\n                \n            }\n        }\n\n    }\n\n    const submitBtnCaption = computed(() => {\n        if(mode.value === 'login') {\n            return 'Login'\n        } else {\n            return 'Signup'\n        }\n    })\n    const authContent = computed(() => {\n        if(mode.value === 'login') {\n            return 'Sign up'\n        } else {\n            return 'Log in'\n        }\n    })\n\n    function switchAuth() {\n        if (mode.value === 'login') {\n            mode.value = 'signup'\n        } else if (mode.value === 'signup') {\n            mode.value = 'login'\n        }\n    }\n\n   async function submitForm() {\n        const payload = {\n            email: email.value,\n            password: password.value\n        }\n\n        isLoading.value = true\n        try{\n            if(mode.value === 'login') {\n                await store.dispatch('login', payload)\n            } else {\n                await store.dispatch('signup', payload)\n            }\n            router.replace('/')\n        }catch(err) {\n            console.log(err);\n        }\n    }\n\n\n\n    return {email, password, submitBtnCaption, authContent, switchAuth, submitForm, isLoading, mode}\n  }\n \n\n}\n</script>\n\n<style scoped>\n\n.input-container {\n        width: 80%;\n        margin: auto;\n        display: flex;\n        gap: 2vw;\n        margin-bottom: 3vw;\n        justify-content: center;\n        \n    }\n\n    input,\n    textarea {\n        width: 25vw;\n        border-radius: .5vw;\n\n    }\n\n    span {\n        text-decoration: underline;\n        cursor: pointer;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module"}