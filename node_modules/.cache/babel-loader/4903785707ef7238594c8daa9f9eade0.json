{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/tamashollos/Git/living-togeter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport BaseButton from '@/components/UI/BaseButton.vue';\nimport { ref } from '@vue/reactivity';\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  components: {\n    BaseButton: BaseButton\n  },\n  setup: function setup() {\n    var email = ref('');\n    var password = ref('');\n    var mode = ref('login');\n    var isLoading = ref(false);\n    var store = useStore();\n    var router = useRouter();\n    var submitBtnCaption = computed(function () {\n      if (mode.value === 'login') {\n        return 'Login';\n      } else {\n        return 'Signup';\n      }\n    });\n    var authContent = computed(function () {\n      if (mode.value === 'login') {\n        return 'Sign up';\n      } else {\n        return 'Log in';\n      }\n    });\n    function switchAuth() {\n      if (mode.value === 'login') {\n        mode.value = 'signup';\n      } else if (mode.value === 'signup') {\n        mode.value = 'login';\n      }\n    }\n    function submitForm() {\n      return _submitForm.apply(this, arguments);\n    }\n    function _submitForm() {\n      _submitForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var payload;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                payload = {\n                  email: email.value,\n                  password: password.value\n                };\n                isLoading.value = true;\n                _context.prev = 2;\n                if (!(mode.value === 'login')) {\n                  _context.next = 8;\n                  break;\n                }\n                _context.next = 6;\n                return store.dispatch('login', payload);\n              case 6:\n                _context.next = 11;\n                break;\n              case 8:\n                console.log(payload, mode.value);\n                _context.next = 11;\n                return store.dispatch('signup', payload);\n              case 11:\n                router.replace('/');\n                _context.next = 17;\n                break;\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 14]]);\n      }));\n      return _submitForm.apply(this, arguments);\n    }\n    return {\n      email: email,\n      password: password,\n      submitBtnCaption: submitBtnCaption,\n      authContent: authContent,\n      switchAuth: switchAuth,\n      submitForm: submitForm,\n      isLoading: isLoading\n    };\n  }\n};","map":{"version":3,"mappings":";;;;AAwBA,OAAOA,UAAS,MAAO,gCAA+B;AACtD,SAASC,GAAE,QAAS,iBAAgB;AACpC,SAASC,QAAO,QAAS,mBAAmB;AAC5C,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,UAAU,EAAE;IAAEL,UAAS,EAATA;EAAW,CAAC;EAE1BM,KAAK,mBAAG;IACN,IAAMC,KAAI,GAAIN,GAAG,CAAC,EAAE,CAAC;IACrB,IAAMO,QAAO,GAAIP,GAAG,CAAC,EAAE;IACvB,IAAMQ,IAAG,GAAIR,GAAG,CAAC,OAAO;IACxB,IAAMS,SAAQ,GAAIT,GAAG,CAAC,KAAK;IAC3B,IAAMU,KAAI,GAAIR,QAAQ,EAAC;IACvB,IAAMS,MAAK,GAAIR,SAAS,EAAC;IAEzB,IAAMS,gBAAe,GAAIX,QAAQ,CAAC,YAAM;MACpC,IAAGO,IAAI,CAACK,KAAI,KAAM,OAAO,EAAE;QACvB,OAAO,OAAM;MACjB,OAAO;QACH,OAAO,QAAO;MAClB;IACJ,CAAC;IACD,IAAMC,WAAU,GAAIb,QAAQ,CAAC,YAAM;MAC/B,IAAGO,IAAI,CAACK,KAAI,KAAM,OAAO,EAAE;QACvB,OAAO,SAAQ;MACnB,OAAO;QACH,OAAO,QAAO;MAClB;IACJ,CAAC;IAED,SAASE,UAAU,GAAG;MAClB,IAAIP,IAAI,CAACK,KAAI,KAAM,OAAO,EAAE;QACxBL,IAAI,CAACK,KAAI,GAAI,QAAO;MACxB,OAAO,IAAIL,IAAI,CAACK,KAAI,KAAM,QAAQ,EAAE;QAChCL,IAAI,CAACK,KAAI,GAAI,OAAM;MACvB;IACJ;IAAA,SAEcG,UAAU;MAAA;IAAA;IAAA;MAAA,yEAAzB;QAAA;QAAA;UAAA;YAAA;cAAA;gBACWC,OAAM,GAAI;kBACZX,KAAK,EAAEA,KAAK,CAACO,KAAK;kBAClBN,QAAQ,EAAEA,QAAQ,CAACM;gBACvB;gBACAJ,SAAS,CAACI,KAAI,GAAI,IAAG;gBAAA;gBAAA,MAEdL,IAAI,CAACK,KAAI,KAAM,OAAO;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACfH,KAAK,CAACQ,QAAQ,CAAC,OAAO,EAAED,OAAO;cAAA;gBAAA;gBAAA;cAAA;gBAErCE,OAAO,CAACC,GAAG,CAACH,OAAO,EAAET,IAAI,CAACK,KAAK,CAAC;gBAAA;gBAAA,OAC1BH,KAAK,CAACQ,QAAQ,CAAC,QAAQ,EAAED,OAAO;cAAA;gBAE1CN,MAAM,CAACU,OAAO,CAAC,GAAG;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAElBF,OAAO,CAACC,GAAG,aAAK;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAKxB;MAAA;IAAA;IAIA,OAAO;MAACd,KAAK,EAALA,KAAK;MAAEC,QAAQ,EAARA,QAAQ;MAAEK,gBAAgB,EAAhBA,gBAAgB;MAAEE,WAAW,EAAXA,WAAW;MAAEC,UAAU,EAAVA,UAAU;MAAEC,UAAU,EAAVA,UAAU;MAAEP,SAAS,EAATA;IAAS;EAC3F;AAGF","names":["BaseButton","ref","computed","useStore","useRouter","components","setup","email","password","mode","isLoading","store","router","submitBtnCaption","value","authContent","switchAuth","submitForm","payload","dispatch","console","log","replace"],"sourceRoot":"","sources":["/Users/tamashollos/Git/living-togeter/src/pages/auth/UseAuth.vue"],"sourcesContent":["<template>\n  <base-card>\n    <h2>Register as a resident</h2>\n    <div v-if=\"isLoading\">Authenticating...</div>\n    <base-form v-else @submit.prevent=\"submitForm\">\n            <div class=\"input-container\">\n                <label for=\"email\">Email address:</label>\n                <input type=\"email\" id=\"email\" v-model.trim=\"email\" requeired>\n            </div>\n\n            <div class=\"input-container\">\n                <label for=\"password\">Password:</label>\n                <input type=\"password\" id=\"password\" v-model.trim=\"password\" requeired>\n            </div>\n            <div class=\"input-container\">\n                <base-button type=\"filled\">{{submitBtnCaption}}</base-button>\n                <p>Or <span @click=\"switchAuth\">{{authContent}}</span> instead!</p>\n            </div>\n  </base-form>\n</base-card>\n\n</template>\n\n<script>\nimport BaseButton from '@/components/UI/BaseButton.vue'\nimport { ref } from '@vue/reactivity'\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  components: { BaseButton },\n\n  setup() {\n    const email = ref('');\n    const password = ref('')\n    const mode = ref('login')\n    const isLoading = ref(false)\n    const store = useStore()\n    const router = useRouter()\n\n    const submitBtnCaption = computed(() => {\n        if(mode.value === 'login') {\n            return 'Login'\n        } else {\n            return 'Signup'\n        }\n    })\n    const authContent = computed(() => {\n        if(mode.value === 'login') {\n            return 'Sign up'\n        } else {\n            return 'Log in'\n        }\n    })\n\n    function switchAuth() {\n        if (mode.value === 'login') {\n            mode.value = 'signup'\n        } else if (mode.value === 'signup') {\n            mode.value = 'login'\n        }\n    }\n\n   async function submitForm() {\n        const payload = {\n            email: email.value,\n            password: password.value\n        }\n        isLoading.value = true\n        try{\n            if(mode.value === 'login') {\n                await store.dispatch('login', payload)\n            } else {\n                console.log(payload, mode.value);\n                await store.dispatch('signup', payload)\n            }\n            router.replace('/')\n        }catch(err) {\n            console.log(err);\n        }\n\n\n\n    }\n\n\n\n    return {email, password, submitBtnCaption, authContent, switchAuth, submitForm, isLoading}\n  }\n \n\n}\n</script>\n\n<style scoped>\n\n.input-container {\n        width: 80%;\n        margin: auto;\n        display: flex;\n        gap: 2vw;\n        margin-bottom: 3vw;\n        justify-content: center;\n        \n    }\n\n    input,\n    textarea {\n        width: 25vw;\n        border-radius: .5vw;\n\n    }\n\n    span {\n        text-decoration: underline;\n        cursor: pointer;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module"}