{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-010ade68\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h2\", null, \"Register as a resident\", -1 /* HOISTED */);\n});\nvar _hoisted_2 = {\n  key: 0\n};\nvar _hoisted_3 = {\n  \"class\": \"input-container\"\n};\nvar _hoisted_4 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"email\"\n  }, \"Email address:\", -1 /* HOISTED */);\n});\nvar _hoisted_5 = {\n  \"class\": \"input-container\"\n};\nvar _hoisted_6 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"password\"\n  }, \"Password:\", -1 /* HOISTED */);\n});\nvar _hoisted_7 = {\n  \"class\": \"input-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_profile_form = _resolveComponent(\"profile-form\");\n  var _component_base_button = _resolveComponent(\"base-button\");\n  var _component_base_form = _resolveComponent(\"base-form\");\n  var _component_base_card = _resolveComponent(\"base-card\");\n  return _openBlock(), _createBlock(_component_base_card, null, {\n    \"default\": _withCtx(function () {\n      return [_hoisted_1, $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Authenticating...\")) : (_openBlock(), _createBlock(_component_base_form, {\n        key: 1,\n        onSubmit: _withModifiers($setup.submitForm, [\"prevent\"])\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n              return $setup.email = $event;\n            }),\n            requeired: \"\"\n          }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.email, void 0, {\n            trim: true\n          }]])]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n              return $setup.password = $event;\n            }),\n            requeired: \"\"\n          }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.password, void 0, {\n            trim: true\n          }]])]), $setup.mode === 'signup' ? (_openBlock(), _createBlock(_component_profile_form, {\n            key: 0,\n            onProfileData: $setup.sortProfileData\n          }, null, 8 /* PROPS */, [\"onProfileData\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_base_button, {\n            type: \"filled\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createTextVNode(_toDisplayString($setup.submitBtnCaption), 1 /* TEXT */)];\n            }),\n\n            _: 1 /* STABLE */\n          }), _createElementVNode(\"p\", null, [_createTextVNode(\"Or \"), _createElementVNode(\"span\", {\n            onClick: _cache[2] || (_cache[2] = function () {\n              return $setup.switchAuth && $setup.switchAuth.apply($setup, arguments);\n            })\n          }, _toDisplayString($setup.authContent), 1 /* TEXT */), _createTextVNode(\" instead!\")])])];\n        }),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onSubmit\"]))];\n    }),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"mappings":";;;;;sBAEIA,oBAA+B,YAA3B,wBAAsB;AAAA;;;;;EAGb,SAAM;AAAiB;;sBACxBA,oBAAyC;IAAlC,OAAI;EAAO,GAAC,gBAAc;AAAA;;EAIhC,SAAM;AAAiB;;sBACxBA,oBAAuC;IAAhC,OAAI;EAAU,GAAC,WAAS;AAAA;;EAI9B,SAAM;AAAiB;;;;;;uBAdtCC,aAmBUC;wBAlBR;MAAA,OAA+B,CAA/BC,UAA+B,EACpBC,gBAAS,kBAApBC,oBAA6C,mBAAvB,mBAAiB,oBACvCJ,aAeUK;;QAfSC,QAAM,iBAAUH,iBAAU;;4BACrC;UAAA,OAGM,CAHNJ,oBAGM,OAHNQ,UAGM,GAFFC,UAAyC,kBACzCT,oBAA8D;YAAvDU,IAAI,EAAC,OAAO;YAACC,EAAE,EAAC,OAAO;;qBAAeP,YAAK;YAAA;YAAEQ,SAAS,EAAT;yDAAPR,YAAK;kBAAnB;UAAoB,QAGvDJ,oBAGM,OAHNa,UAGM,GAFFC,UAAuC,kBACvCd,oBAAuE;YAAhEU,IAAI,EAAC,UAAU;YAACC,EAAE,EAAC,UAAU;;qBAAeP,eAAQ;YAAA;YAAEQ,SAAS,EAAT;yDAAVR,eAAQ;kBAAtB;UAAuB,QAE5CA,WAAI,+BAAxBH,aAAoFc;;YAA7CC,aAAW,EAAEZ;2FACpDJ,oBAGM,OAHNiB,UAGM,GAFFC,aAA6DC;YAAhDT,IAAI,EAAC;UAAQ;gCAAC;cAAA,OAAoB,mCAAlBN,uBAAgB;;;;cAC7CJ,oBAAmE,6BAAhE,KAAG,uBAAgD;YAAzCoB,OAAK;cAAA,OAAEhB,+DAAU;YAAA;8BAAIA,kBAAW,mCAAS,WAAS","names":["_createElementVNode","_createBlock","_component_base_card","_hoisted_1","$setup","_createElementBlock","_component_base_form","onSubmit","_hoisted_3","_hoisted_4","type","id","requeired","_hoisted_5","_hoisted_6","_component_profile_form","onProfileData","_hoisted_7","_createVNode","_component_base_button","onClick"],"sourceRoot":"","sources":["/Users/tamashollos/Git/living-togeter/src/pages/auth/UseAuth.vue"],"sourcesContent":["<template>\n  <base-card>\n    <h2>Register as a resident</h2>\n    <div v-if=\"isLoading\">Authenticating...</div>\n    <base-form v-else @submit.prevent=\"submitForm\">\n            <div class=\"input-container\">\n                <label for=\"email\">Email address:</label>\n                <input type=\"email\" id=\"email\" v-model.trim=\"email\" requeired>\n            </div>\n\n            <div class=\"input-container\">\n                <label for=\"password\">Password:</label>\n                <input type=\"password\" id=\"password\" v-model.trim=\"password\" requeired>\n            </div>\n            <profile-form v-if=\"mode=== 'signup'\" @profileData=\"sortProfileData\"></profile-form>\n            <div class=\"input-container\">\n                <base-button type=\"filled\">{{submitBtnCaption}}</base-button>\n                <p>Or <span @click=\"switchAuth\">{{authContent}}</span> instead!</p>\n            </div>\n  </base-form>\n</base-card>\n\n</template>\n\n<script>\nimport BaseButton from '@/components/UI/BaseButton.vue'\nimport { ref } from '@vue/reactivity'\nimport { computed } from '@vue/runtime-core';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport ProfileForm from '@/components/profiles/ProfileForm.vue';\n\nexport default {\n  components: { BaseButton, ProfileForm },\n\n  setup() {\n    const email = ref('');\n    const password = ref('')\n\n    // Profile information \n    const profile = ref({\n        firstName: '',\n        lastName: ''\n    })\n    \n    const mode = ref('login')\n    const isLoading = ref(false)\n    const store = useStore()\n    const router = useRouter()\n\n\n\n    function sortProfileData(data, keyValue)  {\n        for(const key in profile.value) {\n            console.log(key);\n            if(key === keyValue) {\n                profile.value[key] = data\n            }\n\n            console.log(profile.value);\n        }\n\n    }\n\n    const submitBtnCaption = computed(() => {\n        if(mode.value === 'login') {\n            return 'Login'\n        } else {\n            return 'Signup'\n        }\n    })\n    const authContent = computed(() => {\n        if(mode.value === 'login') {\n            return 'Sign up'\n        } else {\n            return 'Log in'\n        }\n    })\n\n    function switchAuth() {\n        if (mode.value === 'login') {\n            mode.value = 'signup'\n        } else if (mode.value === 'signup') {\n            mode.value = 'login'\n        }\n    }\n\n   async function submitForm() {\n        const payload = {\n            email: email.value,\n            password: password.value\n        }\n\n        isLoading.value = true\n        try{\n            if(mode.value === 'login') {\n                await store.dispatch('login', payload)\n            } else {\n                await store.dispatch('signup', payload)\n            }\n            router.replace('/')\n        }catch(err) {\n            console.log(err);\n        }\n    }\n\n\n\n    return {email, password, submitBtnCaption, authContent, switchAuth, submitForm, isLoading, mode, sortProfileData}\n  }\n \n\n}\n</script>\n\n<style scoped>\n\n.input-container {\n        width: 80%;\n        margin: auto;\n        display: flex;\n        gap: 2vw;\n        margin-bottom: 3vw;\n        justify-content: center;\n        \n    }\n\n    input,\n    textarea {\n        width: 25vw;\n        border-radius: .5vw;\n\n    }\n\n    span {\n        text-decoration: underline;\n        cursor: pointer;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module"}