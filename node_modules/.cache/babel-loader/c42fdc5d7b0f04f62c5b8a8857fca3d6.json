{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_community_list = _resolveComponent(\"community-list\");\n  var _component_post = _resolveComponent(\"post\");\n  var _component_base_card = _resolveComponent(\"base-card\");\n  return _openBlock(), _createBlock(_component_base_card, null, {\n    \"default\": _withCtx(function () {\n      return [_createElementVNode(\"h2\", null, _toDisplayString($setup.building.name), 1 /* TEXT */), _createElementVNode(\"div\", null, [_createVNode(_component_community_list, {\n        members: $setup.members\n      }, null, 8 /* PROPS */, [\"members\"]), _createVNode(_component_post)])];\n    }),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"mappings":";;;;;;uBACAA,aAWYC;wBAVJ;MAAA,OAA0B,CAA1BC,oBAA0B,6BAApBC,eAAQ,CAACC,IAAI,kBAEnBF,oBAKM,cAJFG,aAAoDC;QAAnCC,OAAO,EAAEJ;MAAO,sCAEjCE,aAAaG","names":["_createBlock","_component_base_card","_createElementVNode","$setup","name","_createVNode","_component_community_list","members","_component_post"],"sourceRoot":"","sources":["/Users/tamashollos/Git/living-togeter/src/pages/community/Community.vue"],"sourcesContent":["<template>\n<base-card>\n        <h2>{{building.name}}</h2>\n\n        <div>\n            <community-list :members=\"members\"></community-list>\n    \n            <post></post>\n            \n        </div>\n\n\n</base-card>\n\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity'\nimport { useStore } from 'vuex'\nimport CommunityList from '@/components/community/CommunityList.vue'\nimport BaseCard from '@/components/UI/BaseCard.vue'\nimport Post from '@/components/community/Post.vue'\n\nexport default {\n  components: { CommunityList, BaseCard, Post },\n     setup() {\n        const store = useStore()\n        const building = ref({})\n        const members = ref([])\n\n\n        async function init() {\n            const buildingId = localStorage.getItem('buildingMember')\n            try {\n                // Fetch the current building\n                await store.dispatch('buildings/loadBuilding', buildingId)\n\n               const curBuilding = await store.getters['buildings/buildings']\n                building.value = curBuilding\n\n\n                // Fetch the residents of the building\n                await store.dispatch('residents/fetchApplications', buildingId)\n\n                const curApplications = await store.getters['residents/getApplications']\n\n               for(const key in curApplications) {\n                   const userId = curApplications[key].userId;\n\n                   await store.dispatch('profiles/fetchProfile', userId)\n\n                   const wannabeMember = await store.getters['profiles/getProfile']\n                   members.value.push(wannabeMember)\n\n                    \n               }\n               console.log(members.value);\n            } catch(err) {\n                console.log(err);\n            }\n\n        }\n        \n        init()\n        \n\n        return {building, members}\n    }\n\n\n}\n</script>\n\n<style scoped>\n\ndiv {\n    margin-top: 5vw;\n    display: flex;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}